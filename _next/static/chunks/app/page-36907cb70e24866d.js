(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8393:function(e,t,s){Promise.resolve().then(s.bind(s,4264)),Promise.resolve().then(s.bind(s,5390))},4264:function(e,t,s){"use strict";s.d(t,{GameClient:function(){return so}});var a=s(6920),n=s(1148),r=s(3355),l=s(3027),i=s(9354);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-white/40 text-primary-foreground hover:bg-white/60",active:"bg-white/60 border-2 border-white/80 text-primary-foreground hover:bg-white/60",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:s,variant:n,size:l,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:s})),ref:t,...c})});d.displayName="Button";var c=s(364);let u=c.zt,m=c.fC,x=c.xz,h=n.forwardRef((e,t)=>{let{className:s,sideOffset:n=4,...r}=e;return(0,a.jsx)(c.h_,{children:(0,a.jsx)(c.VY,{ref:t,sideOffset:n,className:(0,i.cn)("z-[100] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})})});h.displayName=c.VY.displayName;let p={vegetable:{id:"vegetable",name:"Vegetables",icon:"/items/vegetable_hay.png"},flower:{id:"flower",name:"Flowers",icon:"/items/flower_daisy.png"},tree:{id:"tree",name:"Trees",icon:"/items/tree_oak.png"},building:{id:"building",name:"Buildings",icon:"/items/building_well.png"},decoration:{id:"decoration",name:"Decorations",icon:"/items/road_stones.png"}};var f=s(2091),g=JSON.parse('{"ir":0.25,"LQ":{"tree":{"threshold":25,"maxSize":100,"name":"Forest","bonus":0.25},"flower":{"threshold":25,"maxSize":100,"name":"Garden","bonus":0.25},"vegetable":{"threshold":25,"maxSize":100,"name":"Plantation","bonus":0.35}},"OF":{"Q7":300,"ei":2.5},"DJ":{"_comment_costMultiplier":"The upgrade cost is based on the item\'s base cost times this multiplier.","costMultiplier":100,"_comment_costFactor":"How much the upgrade cost increases for each subsequent level. Formula: upgradeCost * (factor ^ (currentLevel - 1)).","costFactor":5,"_comment_productionMultiplier":"The production bonus per level for an item. 1.0 means +100% of base SPS per level.","productionMultiplier":1,"_comment_itemCountRequirement":"The number of items of a specific type you must own to unlock the first upgrade.","itemCountRequirement":25,"_comment_itemCountRequirementFactor":"How the item count requirement increases for subsequent upgrade levels.","itemCountRequirementFactor":2},"aY":{"costMultiplier":75,"costFactor":3.5,"_comment_productionMultiplier":"Production bonus for buildings that produce seeds directly.","productionMultiplier":2,"_comment_bonusValueIncrease":"How much the percentage bonus of a building increases per level (e.g., a well\'s bonus).","bonusValueIncrease":0.25,"itemCountRequirement":2,"itemCountRequirementFactor":2},"ez":{"costMultiplier":10,"costFactor":3.5,"_comment_costReductionValue":"The percentage (0.5 = 50%) by which the item\'s own cost is reduced per upgrade level.","costReductionValue":0.5,"itemCountRequirement":2,"itemCountRequirementFactor":2},"tS":{"bonusMultiplier":0.25},"SR":{"production":{"bonusValue":0.1},"click":{"bonusValue":2}}}'),b=s(5390),j=s(6039),v=s(9494),y=s(2474),w=s(2621),N=s(8813),S=s(7834),k=s(5348),C=JSON.parse('[{"id":"seedling_start","name":"Seedling\'s Start","description":"You\'ve planted your first seed, beginning a journey of immense growth.","condition":{"type":"totalSeeds","value":100},"reward":{"type":"instantSeeds","value":20,"description":"+20 seeds"}},{"id":"first_growth","name":"First Growth","description":"A tiny sprout breaks through the soil, a promise of the forest to come.","condition":{"type":"totalSeeds","value":500},"reward":{"type":"instantSeeds","value":100,"description":"+100 seeds"}},{"id":"patch_of_green","name":"Patch of Green","description":"Your garden is no longer a single sprout but a noticeable patch of life.","condition":{"type":"totalSeeds","value":2500},"reward":{"type":"instantSeeds","value":500,"description":"+500 seeds"}},{"id":"garden_plot","name":"Garden Plot","description":"You\'re learning to cultivate the land, turning soil into sustenance.","condition":{"type":"totalSeeds","value":10000},"reward":{"type":"instantSeeds","value":2000,"description":"+2,000 seeds"}},{"id":"thriving_meadow","name":"Thriving Meadow","description":"Wildflowers and grasses sway in the breeze, a testament to your efforts.","condition":{"type":"totalSeeds","value":50000},"reward":{"type":"instantSeeds","value":10000,"description":"+10,000 seeds"}},{"id":"budding_grove","name":"Budding Grove","description":"Young trees stand together, their collective strength shaping the landscape.","condition":{"type":"totalSeeds","value":200000},"reward":{"type":"instantSeeds","value":40000,"description":"+40,000 seeds"}},{"id":"verdant_expanse","name":"Verdant Expanse","description":"Your influence spreads, turning barren land into a lush paradise.","condition":{"type":"totalSeeds","value":800000},"reward":{"type":"instantSeeds","value":160000,"description":"+160,000 seeds"}},{"id":"young_forest","name":"Young Forest","description":"A canopy begins to form, creating a new ecosystem beneath it.","condition":{"type":"totalSeeds","value":3000000},"reward":{"type":"instantSeeds","value":600000,"description":"+600,000 seeds"}},{"id":"ancient_woods","name":"Ancient Woods","description":"The trees whisper secrets of old, their roots deep in the earth you shaped.","condition":{"type":"totalSeeds","value":10000000},"reward":{"type":"instantSeeds","value":2000000,"description":"+2M seeds"}},{"id":"heart_of_the_forest","name":"Heart of the Forest","description":"You have created a place of immense power and profound tranquility.","condition":{"type":"totalSeeds","value":40000000},"reward":{"type":"instantSeeds","value":8000000,"description":"+8M seeds"}},{"id":"valley_carver","name":"Valley Carver","description":"Rivers and hills bend to your will, forming a perfect, thriving valley.","condition":{"type":"totalSeeds","value":150000000},"reward":{"type":"instantSeeds","value":30000000,"description":"+30M seeds"}},{"id":"continental_gardener","name":"Continental Gardener","description":"Your garden knows no borders, spanning entire landmasses.","condition":{"type":"totalSeeds","value":600000000},"reward":{"type":"instantSeeds","value":120000000,"description":"+120M seeds"}},{"id":"planet_of_bloom","name":"Planet of Bloom","description":"From space, your world is a jewel of green and blue.","condition":{"type":"totalSeeds","value":2500000000},"reward":{"type":"instantSeeds","value":500000000,"description":"+500M seeds"}},{"id":"system_of_life","name":"System of Life","description":"Neighboring planets show signs of your verdant touch.","condition":{"type":"totalSeeds","value":10000000000},"reward":{"type":"instantSeeds","value":2000000000,"description":"Instant +2 Billion Seeds"}},{"id":"nebula_of_seeds","name":"Nebula of Seeds","description":"You cast your seeds into the cosmos, creating new gardens among the stars.","condition":{"type":"totalSeeds","value":50000000000},"reward":{"type":"instantSeeds","value":10000000000,"description":"Instant +10 Billion Seeds"}},{"id":"galactic_core","name":"Galactic Core","description":"The center of the galaxy is a swirling vortex of your creation.","condition":{"type":"totalSeeds","value":200000000000},"reward":{"type":"instantSeeds","value":40000000000,"description":"Instant +40 Billion Seeds"}},{"id":"supercluster_farmer","name":"Supercluster Farmer","description":"You cultivate not just galaxies, but clusters of them.","condition":{"type":"totalSeeds","value":1000000000000},"reward":{"type":"instantSeeds","value":200000000000,"description":"Instant +200 Billion Seeds"}},{"id":"cosmic_filament","name":"Cosmic Filament","description":"The very structure of the universe is woven from your creations.","condition":{"type":"totalSeeds","value":4000000000000},"reward":{"type":"instantSeeds","value":800000000000,"description":"Instant +800 Billion Seeds"}},{"id":"universal_architect","name":"Universal Architect","description":"You design and build universes with the ease of a simple gardener.","condition":{"type":"totalSeeds","value":15000000000000},"reward":{"type":"instantSeeds","value":3000000000000,"description":"Instant +3 Trillion Seeds"}},{"id":"multiverse_of_green","name":"Multiverse of Green","description":"An infinite number of universes, all thriving under your care.","condition":{"type":"totalSeeds","value":60000000000000},"reward":{"type":"instantSeeds","value":12000000000000,"description":"Instant +12 Trillion Seeds"}},{"id":"the_first_seed","name":"The First Seed","description":"You have become the origin point from which all growth begins.","condition":{"type":"totalSeeds","value":250000000000000},"reward":{"type":"instantSeeds","value":50000000000000,"description":"Instant +50 Trillion Seeds"}},{"id":"concept_of_growth","name":"Concept of Growth","description":"You are no longer a gardener; you are the very idea of growth itself.","condition":{"type":"totalSeeds","value":1000000000000000},"reward":{"type":"instantSeeds","value":200000000000000,"description":"Instant +200 Trillion Seeds"}},{"id":"the_unfolding","name":"The Unfolding","description":"Reality itself unfolds like a leaf at your command.","condition":{"type":"totalSeeds","value":5000000000000000},"reward":{"type":"instantSeeds","value":1000000000000000,"description":"Instant +1 Quadrillion Seeds"}},{"id":"beyond_infinity","name":"Beyond Infinity","description":"You have surpassed all known limits of creation.","condition":{"type":"totalSeeds","value":20000000000000000},"reward":{"type":"instantSeeds","value":4000000000000000,"description":"Instant +4 Quadrillion Seeds"}},{"id":"the_final_bloom","name":"The Final Bloom","description":"The ultimate expression of life has been achieved.","condition":{"type":"totalSeeds","value":100000000000000000},"reward":{"type":"instantSeeds","value":20000000000000000,"description":"Instant +20 Quadrillion Seeds"}},{"id":"hyperdimensional_harvest","name":"Hyperdimensional Harvest","description":"You reap what you sow across dimensions beyond comprehension.","condition":{"type":"totalSeeds","value":400000000000000000},"reward":{"type":"instantSeeds","value":80000000000000000,"description":"Instant +80 Quadrillion Seeds"}},{"id":"omega_point","name":"Omega Point","description":"You have reached the final, ultimate state of complexity and consciousness.","condition":{"type":"totalSeeds","value":1500000000000000000},"reward":{"type":"instantSeeds","value":300000000000000000,"description":"Instant +300 Quadrillion Seeds"}},{"id":"transcendence","name":"Transcendence","description":"You exist beyond the physical realm, a being of pure, generative energy.","condition":{"type":"totalSeeds","value":6000000000000000000},"reward":{"type":"instantSeeds","value":1200000000000000000,"description":"Instant +1.2 Quintillion Seeds"}},{"id":"the_great_stillness","name":"The Great Stillness","description":"Having created everything, you can finally rest.","condition":{"type":"totalSeeds","value":25000000000000000000},"reward":{"type":"instantSeeds","value":5000000000000000000,"description":"Instant +5 Quintillion Seeds"}},{"id":"idle_mastery","name":"Idle Mastery","description":"You have achieved everything. The cycle is complete. Congratulations.","condition":{"type":"totalSeeds","value":100000000000000000000},"reward":{"type":"instantSeeds","value":20000000000000000000,"description":"Instant +20 Quintillion Seeds"}}]');function T(e){return e<=1?0:g.OF.Q7*Math.pow(g.OF.ei,e-2)}function _(e){let{onClick:t}=e;return(0,a.jsx)("div",{"data-no-grid-interaction":"true",children:(0,a.jsx)("button",{onClick:t,className:(0,i.cn)("w-24 h-24 rounded-full border-4 border-accent-dark shadow-lg text-white flex items-center justify-center","transition-transform duration-150 active:scale-90"),style:{backgroundImage:"url('/items/floor_dirt.png')",backgroundSize:"cover"},children:(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:64,height:64,className:"drop-shadow-lg",unoptimized:!0})})})}let z=[{key:"cost",name:"Cost",icon:j.Z},{key:"seedsPerSecond",name:"Production",icon:v.Z},{key:"difficulty",name:"Unlock Order",icon:y.Z}],I=[{id:"pan",icon:"/items/icon_hand.png",name:"Pan"},{id:"edit",icon:"/items/icon_pencil.png",name:"Edit"},{id:"sample",icon:"/items/icon_eyedropper.png",name:"Sample"}],M=I.filter(e=>"sample"!==e.id),R=e=>{var t,s;if(!e.bonus&&!e.upgradeType)return null;if((null===(t=e.bonus)||void 0===t?void 0:t.type)==="production"){let t=e.bonus.appliesTo.map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(", ");return"+".concat(100*e.bonus.value,"% production to ").concat(t," within ").concat(e.bonus.radius," tiles.")}return(null===(s=e.bonus)||void 0===s?void 0:s.type)==="radiusIncrease"?"+".concat(e.bonus.value," radius to Buildings within ").concat(e.bonus.radius," tiles."):"costReduction"===e.upgradeType?"Reduces its own cost by ".concat(100*g.ez.costReductionValue,"% per upgrade level."):null};function E(e){let{items:t,unlockedItems:s,itemStats:r,selectedTool:l,onToolSelect:o,onManualSeedGather:c}=e,{playerStats:j,nextCosts:v}=(0,b.g)(),[y,T]=(0,n.useState)("all"),[E,P]=(0,n.useState)("difficulty"),[D,F]=(0,n.useState)("asc"),U=z.find(e=>e.key===E),A=(0,n.useMemo)(()=>new Set(s.map(e=>e.id)),[s]),O=(0,n.useMemo)(()=>{if(!t)return[];let e=[...t].sort((e,t)=>(e.difficulty||0)-(t.difficulty||0)),a=new Set;s.forEach(e=>a.add(e.id));let n=Object.values(t).reduce((e,t)=>{let s=t.category;return e[s]||(e[s]=[]),e[s].push(t),e},{});for(let e in n)for(let t of n[e].sort((e,t)=>(e.difficulty||0)-(t.difficulty||0)))if(!A.has(t.id)){a.add(t.id);break}return e.filter(e=>a.has(e.id)).map(e=>({...e,isUnlocked:A.has(e.id)}))},[t,s,A]),B=(0,n.useMemo)(()=>v&&0!==Object.keys(v).length?O.filter(e=>"home_base"!==e.id&&("all"===y?!["building","decoration","road"].includes(e.category):e.category===y)).sort((e,t)=>{let s,a;switch(E){case"cost":s=v[e.id]||e.cost,a=v[t.id]||t.cost;break;case"difficulty":s=e.difficulty||1,a=t.difficulty||1;break;default:s=e.seedsPerSecond||0,a=t.seedsPerSecond||0}return"asc"===D?s-a:a-s}):[],[O,y,E,D,v]),L={id:"all",name:"All Crops",icon:"/items/icon_all_categories.png"},G=(0,n.useMemo)(()=>{let e=new Set(t.map(e=>e.category));return[L,...["flower","vegetable","tree","building","decoration"].map(e=>p[e]).filter(t=>t&&e.has(t.id))]},[t]),V=(0,n.useMemo)(()=>{let e=new Set(t.map(e=>e.category));return[L,...["building","decoration"].map(e=>p[e]).filter(t=>t&&e.has(t.id))]},[t]),Z=e=>{var s;return(null===(s=t.find(t=>t.id===e))||void 0===s?void 0:s.name)||"items"};return v?(0,a.jsx)(u,{children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("aside",{"data-no-grid-interaction":"true",className:"fixed bottom-4 left-4 right-4 h-auto flex flex-col p-2 gap-2 glass-panel glass-panel-interactive md:top-4 md:bottom-4 md:left-4 md:w-[220px] md:h-auto md:right-auto",children:[(0,a.jsxs)("div",{className:"relative flex md:hidden flex-col",children:[(0,a.jsx)("div",{className:(0,i.cn)("absolute top-0 left-1/2 -translate-x-1/2 -translate-y-[80px] z-20 transition-opacity","edit"===l.tool&&"opacity-0 pointer-events-none"),children:(0,a.jsx)(_,{onClick:c})}),(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center pb-2 border-b border-border/50",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("div",{className:"flex flex-row gap-2",children:V.map(e=>{if(!e)return null;let t=e.icon.startsWith("/");return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:y===e.id?"active":"default",size:"icon",className:"rounded-2xl w-12 h-12 text-2xl",onClick:()=>T(e.id),children:t?(0,a.jsx)(f.default,{src:e.icon,alt:e.name,width:28,height:28,className:"object-contain",unoptimized:!0}):(0,a.jsx)("span",{children:e.icon})})}),(0,a.jsx)(h,{side:"top",children:(0,a.jsx)("p",{className:"text-lg",children:e.name})})]},e.id)})})}),(0,a.jsxs)("div",{className:"flex flex-row gap-2",children:["paint"===l.tool&&(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"destructive",size:"icon",onClick:()=>o({...l,tool:"pan",paintId:""}),className:"rounded-2xl w-12 h-12 flex items-center justify-center",children:(0,a.jsx)(w.Z,{className:"w-6 h-6"})})}),(0,a.jsx)(h,{side:"top",children:(0,a.jsx)("p",{className:"text-lg capitalize",children:"Cancel Placement"})})]}),M.map(e=>{let{id:t,icon:s,name:n}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:l.tool===t?"active":"default",size:"icon",onClick:()=>o({...l,tool:t}),className:"rounded-2xl w-12 h-12 flex items-center justify-center",children:(0,a.jsx)(f.default,{src:s,alt:n,width:24,height:24,unoptimized:!0})})}),(0,a.jsx)(h,{side:"top",children:(0,a.jsx)("p",{className:"text-lg capitalize",children:n})})]},t)})]})]})]}),(0,a.jsx)("div",{className:"flex-grow overflow-x-auto overflow-y-hidden flex flex-row gap-2 h-auto md:overflow-y-auto md:overflow-x-hidden md:flex-col md:space-y-2 md:pr-1 md:-mr-1",children:B.map((e,t)=>{var s,n,d,c;let u=e.placeableOn.includes("grass")?"grass":"dirt",p=(null==r?void 0:null===(s=r[e.id])||void 0===s?void 0:s.count)||0,b=v[e.id]||e.cost,y=j.seeds>=b,w=!e.isUnlocked,S=function(e,t,s){var a,n,r;let l=e.seedsPerSecond||0;if(0===l)return 0;let i=(null===(a=t.itemLevels)||void 0===a?void 0:a[e.id])||1,o=l;"costReduction"!==e.upgradeType&&i>1&&(o=l*(1+(i-1)*("building"===e.category?g.aY:g.DJ).productionMultiplier));let d=s.group+s.building+s.water,c=1,u=(null===(n=t.globalLevels)||void 0===n?void 0:n.production)||1;u>1&&(c+=(u-1)*g.SR.production.bonusValue),(t.unlockedAchievements||[]).forEach(e=>{let t=C.find(t=>t.id===e);t&&"globalMultiplier"===t.reward.type&&(c*=t.reward.value)});let m=(null===(r=t.categoryMultipliers)||void 0===r?void 0:r[e.category])||1;return o*(1+d)*c*m}(e,j,{group:0,building:0,water:0}),k=(null===(n=j.itemLevels)||void 0===n?void 0:n[e.id])||1,T=e.seedsPerSecond>0,_="building"===e.category&&(null===(d=e.bonus)||void 0===d?void 0:d.type)==="production",z="costReduction"===e.upgradeType,I=T||_||z,M=0;if(I){let t;let s="building"===e.category;M=Math.floor((t=z?g.ez:s?g.aY:g.DJ).itemCountRequirement*Math.pow(t.itemCountRequirementFactor,k-1))}let E=R(e);return(0,a.jsxs)(m,{delayDuration:300,children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)("button",{onClick:()=>o({tool:"paint",brush:"single",paintId:e.id}),disabled:!y||w,className:(0,i.cn)("w-28 h-28 md:w-full md:h-[124px] flex-shrink-0 rounded-lg p-1 relative transition-all duration-200",l.paintId===e.id&&"paint"===l.tool?"ring-2 ring-primary bg-primary/20":"hover:bg-white/20",(!y||w)&&"opacity-50 cursor-not-allowed"),children:(0,a.jsxs)("div",{className:"w-full h-full rounded-md flex flex-col items-center justify-between text-center p-2 relative text-white",style:{backgroundImage:"url('/items/floor_".concat(u,".png')"),backgroundSize:"cover"},children:[w&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center z-10 rounded-md p-2",children:[(0,a.jsx)(N.Z,{className:"w-8 h-8 text-white/50 mb-2"}),(0,a.jsxs)("p",{className:"text-sm font-bold text-white/80 leading-tight",children:["Requires ",e.requiredItemCount," ",Z(e.requiredItemId)]}),(0,a.jsxs)("p",{className:"text-xs text-white/60",children:["(",(null===(c=r[e.requiredItemId])||void 0===c?void 0:c.count)||0,"/",e.requiredItemCount,")"]})]}),I&&!w&&(0,a.jsxs)("div",{className:"absolute top-1 left-2 text-sm font-bold text-white/80 bg-black/30 px-1 rounded-sm text-shadow-2xs",children:[p,"/",M]}),"decoration"===e.category&&p>0&&(0,a.jsxs)("div",{className:"absolute top-1 left-2 text-sm font-bold text-white/80 bg-black/30 px-1 rounded-sm text-shadow-2xs",children:["x",p]}),(0,a.jsx)("div",{className:"flex-grow flex items-center justify-center w-[64px] h-[64px]",children:e.imageUrl?(0,a.jsx)(f.default,{src:e.imageUrl,alt:e.name,width:64,height:64,className:"object-contain drop-shadow-lg",unoptimized:!0,priority:0===t}):(0,a.jsx)("span",{className:"text-4xl",children:e.emoji})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"flex justify-between items-center text-base w-full",children:[(0,a.jsx)("p",{className:"font-bold flex items-center gap-1 text-shadow-2xs",children:e.seedsPerSecond>0&&"+".concat((0,i.u)(S),"/s")}),(0,a.jsx)("p",{className:"font-bold flex items-center gap-1 text-shadow-2xs",children:(0,a.jsxs)("span",{children:["-",(0,i.u)(b)]})})]})})]})})}),(0,a.jsx)(h,{side:"right",className:"ml-2 md:side-right",children:(0,a.jsxs)("div",{className:"text-lg w-60 space-y-1",children:[(0,a.jsx)("p",{className:"font-bold text-xl",children:e.name}),"building"!==e.category&&"decoration"!==e.category&&e.seedsPerSecond>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Production:"}),(0,a.jsxs)("span",{className:"font-semibold flex items-center gap-1",children:[(0,i.u)(S),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:14,height:14,unoptimized:!0}),"/s"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Cost:"}),(0,a.jsxs)("span",{className:"font-semibold flex items-center gap-1",children:[(0,i.u)(b),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:14,height:14,unoptimized:!0})]})]}),I&&M>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Next upgrade:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[p,"/",M]})]}),E&&(0,a.jsx)("div",{className:"pt-1",children:(0,a.jsx)("p",{className:"text-sm text-yellow-300 font-semibold",children:E})}),"building"!==e.category&&"decoration"!==e.category&&(0,a.jsxs)("div",{className:"flex justify-between items-center pt-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Soil:"}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:e.placeableOn.map(e=>(0,a.jsx)(f.default,{src:"/items/floor_".concat(e,".png"),alt:e,width:20,height:20,className:"rounded-sm",unoptimized:!0,title:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})})]},e.id)})}),(0,a.jsx)("div",{className:"flex-shrink-0 w-full pt-2 border-t border-border/50 hidden md:block",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"secondary",size:"sm",className:"h-8",onClick:()=>{let e=(z.findIndex(e=>e.key===E)+1)%z.length;P(z[e].key)},children:(0,a.jsx)("span",{children:U.name})})}),(0,a.jsx)(h,{side:"top",children:(0,a.jsxs)("p",{className:"text-lg",children:["Sort by: ",U.name]})})]}),(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"secondary",size:"sm",className:"h-8",onClick:()=>{F(e=>"asc"===e?"desc":"asc")},children:"asc"===D?(0,a.jsx)(S.Z,{className:"w-4 h-4"}):(0,a.jsx)(k.Z,{className:"w-4 h-4"})})}),(0,a.jsx)(h,{side:"top",children:(0,a.jsxs)("p",{className:"text-lg",children:["Order: ","asc"===D?"Ascending":"Descending"]})})]})]})})]}),(0,a.jsxs)("div",{"data-no-grid-interaction":"true",className:"fixed top-4 left-4 z-20 hidden md:flex md:flex-col justify-between items-center md:py-2 md:h-auto md:top-4 md:bottom-4 md:left-[calc(220px+1rem+0.5rem)]",children:[(0,a.jsx)("div",{className:"flex flex-row md:flex-col gap-2",children:G.map(e=>{if(!e)return null;let t=e.icon.startsWith("/");return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:y===e.id?"active":"default",size:"icon",className:"rounded-2xl w-12 h-12 text-2xl",onClick:()=>T(e.id),children:t?(0,a.jsx)(f.default,{src:e.icon,alt:e.name,width:28,height:28,className:"object-contain",unoptimized:!0}):(0,a.jsx)("span",{children:e.icon})})}),(0,a.jsx)(h,{side:"right",children:(0,a.jsx)("p",{className:"text-lg",children:e.name})})]},e.id)})}),(0,a.jsx)("div",{className:"flex flex-row md:flex-col gap-2",children:I.map(e=>{let{id:t,icon:s,name:n}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:l.tool===t?"active":"default",size:"icon",onClick:()=>o({...l,tool:t}),className:"rounded-2xl w-12 h-12 flex items-center justify-center",children:(0,a.jsx)(f.default,{src:s,alt:n,width:24,height:24,unoptimized:!0})})}),(0,a.jsx)(h,{side:"right",children:(0,a.jsx)("p",{className:"text-lg capitalize",children:n})})]},t)})})]})]})}):null}var P=s(9703),D=s(5103);let F=P.fC,U=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(P.ck,{ref:t,className:(0,i.cn)(s),...n})});U.displayName="AccordionItem";let A=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)(P.h4,{className:"flex",children:(0,a.jsxs)(P.xz,{ref:t,className:(0,i.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all [&[data-state=open]>svg]:rotate-180",s),...r,children:[n,(0,a.jsx)(D.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});A.displayName=P.xz.displayName;let O=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsx)(P.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,a.jsx)("div",{className:(0,i.cn)("pb-4 pt-0",s),children:n})})});O.displayName=P.VY.displayName;var B=s(9385);let L=B.fC,G=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(B.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...n})});G.displayName=B.aV.displayName;let V=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(B.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...n})});V.displayName=B.xz.displayName;let Z=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(B.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...n})});Z.displayName=B.VY.displayName;var W=s(6763),Y=s(8484);let q=n.forwardRef((e,t)=>{let{className:s,orientation:n="horizontal",decorative:r=!0,...l}=e;return(0,a.jsx)(Y.f,{ref:t,decorative:r,orientation:n,className:(0,i.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",s),...l})});q.displayName=Y.f.displayName;var H=JSON.parse('[{"id":"generate_100_manual_seeds","name":"Generate 100 seeds from clicks","description":"Click the large seed button at the bottom of the screen 100 times to gather seeds manually.","reward":200,"icon":"/items/icon_seed.png","background":"grass","condition":{"type":"manualSeeds","value":100}},{"id":"first_upgrade","name":"Make your first upgrade","description":"Purchase any upgrade from the \'Upgrades\' panel on the right.","reward":400,"icon":"/items/icon_seed.png","background":"grass","condition":{"type":"upgrades","value":1}},{"id":"create_first_garden","name":"Create your first garden","description":"Place 25 or more Flowers next to each other to form a Garden and unlock a group production bonus.","reward":600,"icon":"/items/flower_daisy.png","background":"grass","condition":{"type":"groupCount","category":"flower","value":1}},{"id":"place_10_roads","name":"Place 10 roads","description":"Place 10 stone road tiles. You can find them in the \'Decorations\' category on the left.","reward":800,"icon":"/items/road_stones.png","background":"dirt","condition":{"type":"itemCount","itemId":"road_stone","value":10}},{"id":"place_first_well","name":"Place your first well","description":"Place a Well. Wells provide a production bonus to nearby crops.","reward":1000,"icon":"/items/building_well.png","background":"water","condition":{"type":"itemCount","itemId":"well","value":1}},{"id":"create_first_plantation","name":"Create your first plantation","description":"Place 25 or more Vegetables next to each other to form a Plantation for a large bonus.","reward":1500,"icon":"/items/vegetable_hay.png","background":"dirt","condition":{"type":"groupCount","category":"vegetable","value":1}},{"id":"place_first_handcart","name":"Place your first handcart","description":"Place a Handcart. It increases the bonus radius of nearby buildings.","reward":2000,"icon":"/items/building_handcart.png","background":"dirt","condition":{"type":"itemCount","itemId":"handcart","value":1}},{"id":"create_first_forest","name":"Create your first forest","description":"Place 25 or more Trees next to each other to form a Forest.","reward":3000,"icon":"/items/tree_oak.png","background":"grass","condition":{"type":"groupCount","category":"tree","value":1}}]');let K=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...n})});K.displayName="Card",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...n})}).displayName="CardHeader",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...n})}).displayName="CardTitle",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})}).displayName="CardDescription",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...n})}).displayName="CardContent",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...n})}).displayName="CardFooter";let Q=e=>{let{mission:t,isCompleted:s}=e,{missionProgress:n}=(0,b.g)(),r=n[t.id],l=r&&r.current>0&&!s;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-md bg-secondary/30 w-full text-left relative overflow-hidden",style:{backgroundImage:"url('/items/floor_".concat(t.background,".png')"),backgroundSize:"cover"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 z-0"}),(0,a.jsxs)("div",{className:"relative w-10 h-10 bg-black/20 rounded-md flex items-center justify-center flex-shrink-0 z-10",children:[(0,a.jsx)(f.default,{src:t.icon,alt:t.name,width:32,height:32,unoptimized:!0}),l&&(0,a.jsxs)("div",{className:"absolute bottom-0 right-0 transform translate-x-1/4 translate-y-1/4 bg-background/80 text-white text-[10px] font-bold px-1 rounded",children:[r.current,"/",r.target]})]}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)("p",{className:"font-semibold text-sm leading-tight text-ellipsis ".concat(s?"text-white/70 line-through":"text-white"),children:t.name})}),(0,a.jsxs)("div",{className:"font-bold text-base flex items-center gap-1 ".concat(s?"text-white/80":"text-green-400"),children:[(0,a.jsxs)("span",{className:"text-white/70",children:["+",(0,i.u)(t.reward)]}),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:14,height:14,unoptimized:!0})]})]})]})}),(0,a.jsx)(h,{side:"left",children:(0,a.jsx)("p",{className:"text-lg max-w-xs",children:t.description})})]})},J=e=>{let{mission:t,isCompleted:s}=e,{missionProgress:n}=(0,b.g)(),r=n[t.id],l=r&&r.current>0&&!s;return(0,a.jsxs)(K,{className:"p-3 bg-secondary/30 border-border/50 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundImage:"url('/items/floor_".concat(t.background,".png')"),backgroundSize:"cover"}}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 z-0"}),(0,a.jsxs)("div",{className:"flex gap-4 relative z-10",children:[(0,a.jsxs)("div",{className:"w-20 h-20 rounded-md flex-shrink-0 relative flex items-center justify-center p-1",children:[(0,a.jsx)(f.default,{src:t.icon,alt:t.name,width:64,height:64,className:"object-contain drop-shadow-lg z-10",unoptimized:!0}),l&&(0,a.jsxs)("div",{className:"absolute bottom-0 right-0 transform translate-x-1/4 translate-y-1/4 bg-background/80 text-white text-xs font-bold px-1.5 py-0.5 rounded",children:[r.current,"/",r.target]})]}),(0,a.jsxs)("div",{className:"flex-grow flex flex-col justify-center",children:[(0,a.jsx)("p",{className:"font-bold text-lg leading-tight ".concat(s?"text-white/70 line-through":"text-white"),children:t.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:t.description}),(0,a.jsxs)("div",{className:"font-bold text-lg flex items-center gap-1 mt-1 ".concat(s?"text-white/80":"text-green-400"),children:[(0,a.jsxs)("span",{children:["+",(0,i.u)(t.reward)]}),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:16,height:16,unoptimized:!0})]})]})]})]})};function X(e){let{isAccordion:t=!1}=e,{playerStats:s}=(0,b.g)(),n=new Set(s.completedMissions||[]),r=H.filter(e=>!n.has(e.id));return 0===r.length?null:t?(0,a.jsxs)(u,{children:[(0,a.jsx)(A,{className:"p-3 text-base leading-4 font-normal hover:no-underline",children:(0,a.jsxs)("span",{children:["Missions (",r.length," left)"]})}),(0,a.jsx)(O,{className:"px-3 pb-4 max-h-40 overflow-y-auto",children:(0,a.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,a.jsx)(Q,{mission:e,isCompleted:!1},e.id))})})]}):(0,a.jsx)("div",{"data-no-grid-interaction":"true",className:"w-full space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold mb-2 text-primary",children:["Active Missions (",r.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,a.jsx)(J,{mission:e,isCompleted:!1},e.id))})]})})}let $={Forest:"/items/icon-forest.png",Garden:"/items/icon-garden.png",Plantation:"/items/icon-plantation.png"};function ee(e){let{itemStats:t,categoryStats:s,availableUpgrades:r,onPurchaseUpgrade:l}=e,{toast:o}=(0,W.pm)(),{playerStats:d}=(0,b.g)(),[c,p]=(0,n.useState)(["missions","economy"]),j=(0,n.useRef)(r.length),v=(0,n.useMemo)(()=>{let e=new Set(d.completedMissions||[]);return H.some(t=>!e.has(t.id))},[d.completedMissions]);if((0,n.useEffect)(()=>{r.length>j.current&&r.length>0&&!c.includes("upgrades")&&p(e=>[...e,"upgrades"]),j.current=r.length},[r.length,c]),!t||!s)return null;let y=Object.values(t).filter(e=>e.count>0&&e.sps>0).sort((e,t)=>t.sps-e.sps),w=Object.values(s).filter(e=>e&&e.count>0&&e.sps>0).sort((e,t)=>t.sps-e.sps),N=w.filter(e=>e&&(e.groupCount||0)>0).sort((e,t)=>(t.groupSps||0)-(e.groupSps||0)),S=e=>{d.seeds>=e.cost?l(e.itemId,e.upgradeType):o({description:"Not enough seeds!",variant:"destructive"})};return(0,a.jsx)(u,{children:(0,a.jsx)("div",{"data-no-grid-interaction":"true",className:"w-full",children:(0,a.jsxs)(F,{type:"multiple",value:c,onValueChange:p,className:"w-full space-y-2",children:[v&&(0,a.jsx)(U,{value:"missions",className:"glass-panel-interactive text-emerald-950",children:(0,a.jsx)(X,{isAccordion:!0})}),(0,a.jsxs)(U,{value:"economy",className:"glass-panel-interactive text-emerald-950",children:[(0,a.jsx)(A,{className:"p-3 text-base  leading-4 font-normal hover:no-underline",children:(0,a.jsx)("span",{children:"Economy"})}),(0,a.jsx)(O,{className:"px-3 pb-0",children:(0,a.jsxs)(L,{defaultValue:"categories",children:[(0,a.jsxs)(G,{className:"grid w-full grid-cols-2 h-8",children:[(0,a.jsx)(V,{value:"categories",className:"text-xs h-6",children:"Categories"}),(0,a.jsx)(V,{value:"items",className:"text-xs h-6",children:"Items"})]}),(0,a.jsxs)(Z,{value:"categories",className:"space-y-2 text-sm leading-[14px] mt-4 max-h-48 overflow-y-auto pr-2 pb-2",children:[w.map(e=>e?(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 truncate",children:[e.firstItem&&e.firstItem.imageUrl?(0,a.jsx)(f.default,{src:e.firstItem.imageUrl,alt:e.name,width:16,height:16,unoptimized:!0}):(0,a.jsx)("span",{children:e.icon}),(0,a.jsxs)("span",{className:"truncate",children:[e.name," x",e.count]})]}),(0,a.jsxs)("span",{className:"font-bold",children:["+ ",(0,i.u)(e.sps),"/s"]})]},e.name):null),N.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q,{className:"my-2 bg-border/50"}),N.map(e=>{if(!e)return null;let t=Object.keys(s).find(t=>{var a;return(null===(a=s[t])||void 0===a?void 0:a.name)===e.name});if(!t)return null;let n=g.LQ[t];if(!n)return null;let r=$[n.name]||"\uD83C\uDF33";return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 truncate",children:[r.startsWith("/")?(0,a.jsx)(f.default,{src:r,alt:n.name,width:16,height:16,unoptimized:!0}):(0,a.jsx)("span",{children:r}),(0,a.jsxs)("span",{className:"truncate",children:[n.name," x",e.groupCount]})]}),(0,a.jsxs)("span",{className:"font-bold",children:["+ ",(0,i.u)(e.groupSps||0),"/s"]})]},"".concat(e.name,"-group"))})]})]}),(0,a.jsx)(Z,{value:"items",className:"space-y-2 text-sm leading-[14px] mt-4 max-h-48 overflow-y-auto pb-2",children:(0,a.jsx)("div",{className:"flex flex-col gap-2",children:y.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5 truncate",children:[e.item.imageUrl?(0,a.jsx)(f.default,{src:e.item.imageUrl,alt:e.item.name,width:16,height:16,unoptimized:!0}):(0,a.jsx)("span",{children:e.item.emoji}),(0,a.jsxs)("span",{className:"truncate",children:[e.item.name," x",e.count]})]}),(0,a.jsxs)("span",{className:"font-bold",children:["+ ",(0,i.u)(e.sps),"/s"]})]},e.item.id))})})]})})]}),r.length>0&&(0,a.jsxs)(U,{value:"upgrades",className:"glass-panel-interactive text-emerald-950",children:[(0,a.jsx)(A,{className:"p-3 text-base leading-4 font-normal hover:no-underline",children:(0,a.jsxs)("span",{children:["Upgrades (",r.length,")"]})}),(0,a.jsx)(O,{className:"px-3 pt-2 pb-2 max-h-60 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map(e=>{var t;let s=d.seeds>=e.cost,n=(null===(t=e.placeableOn)||void 0===t?void 0:t[0])||"grass";return(0,a.jsxs)(m,{delayDuration:100,children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)("button",{onClick:()=>S(e),disabled:!s,className:(0,i.cn)("w-11 h-11 rounded-md flex-shrink-0 relative transition-opacity",!s&&"opacity-50 cursor-not-allowed"),style:{backgroundImage:"url('/items/floor_".concat(n,".png')"),backgroundSize:"cover"},children:[(0,a.jsx)("div",{className:"w-full h-full bg-black/20 rounded-md flex items-center justify-center p-1",children:e.imageUrl?(0,a.jsx)(f.default,{src:e.imageUrl,alt:e.name,width:36,height:36,className:"object-contain",unoptimized:!0}):(0,a.jsx)("span",{className:"text-3xl",children:e.emoji})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 bg-background text-primary text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-primary",children:e.nextLevel})]})}),(0,a.jsx)(h,{side:"left",align:"center",className:"w-72",children:(0,a.jsxs)("div",{className:"text-lg space-y-1",children:[(0,a.jsxs)("p",{className:"font-bold text-xl",children:[e.name," (Lvl ",e.nextLevel,")"]}),(0,a.jsx)("p",{className:"text-base text-muted-foreground",children:e.description}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Cost:"}),(0,a.jsxs)("span",{className:"font-semibold flex items-center gap-1",children:[(0,i.u)(e.cost),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:14,height:14,unoptimized:!0})]})]}),e.spsIncrease>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-green-400",children:[(0,a.jsx)("span",{children:"(est. increase)"}),(0,a.jsxs)("span",{className:"font-bold flex items-center gap-1",children:["+",(0,i.u)(e.spsIncrease),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:12,height:12,unoptimized:!0}),"/s"]})]})]})})]},"".concat(e.upgradeType,"-").concat(e.itemId))})})})]})]})})})}var et=s(8969),es=s(478),ea=s(8148),en=s(8983),er=s(6522),el=s(3062),ei=s(8445),eo=s(5208),ed=s(4398),ec=s(7202),eu=s(6517),em=s(2101),ex=s(3797),eh=s(1938),ep=s(1631),ef=s(2303),eg=s(4587),eb=s(3588),ej=s(6186),ev=s(5301),ey=s(6656),ew=s(4778),eN=s(5113),eS=s(9298),ek=s(1370),eC=s(1291);let eT={brush:et.Z,eraser:es.Z,rectangle:ea.Z,single:en.Z,logo:er.Z,search:el.Z,upgrades:ei.Z,economy:eo.Z,checksum:ed.Z,reset:ec.Z,trash:eu.Z,check:em.Z,enter:ex.Z,filter:eh.Z,building:ep.Z,spinner:ef.Z,user:eg.Z,settings:eb.Z,tree:er.Z,flower:ej.Z,vegetable:ev.Z,decoration:ey.Z,award:ew.Z,upgradeArrow:eN.Z,rain:eS.Z,all:ek.Z,arrowUp:S.Z,arrowDown:k.Z,stats:eC.Z};function e_(e){let{selectedCount:t,onFinish:s,onDelete:n}=e;return(0,a.jsx)(u,{children:(0,a.jsx)("div",{"data-no-grid-interaction":"true",className:"absolute bottom-[132px] left-1/2 -translate-x-1/2 z-10",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-card border rounded-full shadow-lg animate-in slide-in-from-bottom-10 fade-in-50 duration-300",children:[(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)(d,{onClick:s,className:"rounded-full text-xl px-6 py-6",children:[(0,a.jsx)(eT.check,{className:"w-6 h-6 mr-2"}),"Finish (",t,")",(0,a.jsx)(eT.enter,{className:"w-5 h-5 ml-2"})]})}),(0,a.jsx)(h,{children:(0,a.jsx)("p",{className:"text-lg",children:"Finish selection (Enter)"})})]}),t>0&&(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"destructive",size:"icon",onClick:n,className:"rounded-full w-12 h-12",children:(0,a.jsx)(eT.trash,{className:"w-6 h-6"})})}),(0,a.jsx)(h,{children:(0,a.jsx)("p",{className:"text-lg",children:"Delete selected (Delete)"})})]})]})})})}var ez=s(9546);let eI=ez.fC;ez.xz;let eM=ez.h_,eR=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ez.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n,ref:t})});eR.displayName=ez.aV.displayName;let eE=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsxs)(eM,{children:[(0,a.jsx)(eR,{}),(0,a.jsx)(ez.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n})]})});eE.displayName=ez.VY.displayName;let eP=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};eP.displayName="AlertDialogHeader";let eD=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};eD.displayName="AlertDialogFooter";let eF=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ez.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold",s),...n})});eF.displayName=ez.Dx.displayName;let eU=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ez.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})});eU.displayName=ez.dk.displayName;let eA=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ez.aU,{ref:t,className:(0,i.cn)(o(),s),...n})});eA.displayName=ez.aU.displayName;let eO=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ez.$j,{ref:t,className:(0,i.cn)(o({variant:"outline"}),"mt-2 sm:mt-0",s),...n})});eO.displayName=ez.$j.displayName;var eB=s(5781);function eL(e){var t,s;let{camera:n,tooltipData:r,itemInfo:l,itemLevel:o}=e;if(!r||!r.tile.item||!l)return null;let{tile:d,group:c,sps:u}=r,{x:m,y:x,item:h}=d,p=64*m*n.zoom+n.x+64*n.zoom*(l.width||1)/2,b=64*x*n.zoom+n.y,j=r.groupBonus||0,v=r.buildingBonus||0,y=r.waterBonus||0,w=(Date.now()-h.placedAt)/1e3,N="costReduction"===l.upgradeType&&o>1?g.ez.costReductionValue*(o-1):0;return(0,a.jsx)("div",{"data-no-grid-interaction":"true",className:"absolute z-20 w-72 p-1",style:{left:"".concat(p,"px"),top:"".concat(b,"px"),transform:"translate(-50%, -105%)"},children:(0,a.jsxs)(K,{className:"p-3 bg-popover text-popover-foreground text-xl animate-in fade-in zoom-in-90",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l.imageUrl?(0,a.jsx)(f.default,{src:l.imageUrl,alt:l.name,width:40,height:40,className:"object-contain",unoptimized:!0}):(0,a.jsx)("span",{className:"text-3xl",children:l.emoji}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-bold text-2xl",children:l.name}),(0,a.jsxs)("span",{className:"text-sm text-primary font-semibold",children:["Level ",o]})]})]}),(0,a.jsxs)("div",{className:"font-bold text-primary flex items-center gap-1",children:[(0,a.jsx)("span",{children:(0,i.u)(u)}),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:16,height:16,unoptimized:!0}),(0,a.jsx)("span",{children:"/s"})]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Placed:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[" ",(0,eB.Q)(h.placedAt,{addSuffix:!0})]})]}),"building"!==l.category&&"road"!==l.category&&"decoration"!==l.category&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Generated:"}),(0,a.jsxs)("span",{className:"font-semibold flex items-center gap-1",children:[(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:16,height:16,unoptimized:!0}),(0,i.u)(Math.floor(u*w))]})]}),j>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[c.name," (",c.size,"):"]}),(0,a.jsx)("span",{className:"font-semibold text-green-400",children:"+".concat(Math.round(100*j),"%")})]}),v>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground flex items-center gap-1",children:"Building Bonus:"}),(0,a.jsxs)("span",{className:"font-semibold text-yellow-400",children:["+",Math.round(100*v),"%"]})]}),y>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-muted-foreground flex items-center gap-1",children:"Water Bonus:"}),(0,a.jsxs)("span",{className:"font-semibold text-sky-400",children:["+",Math.round(100*y),"%"]})]})]}),(null===(t=l.bonus)||void 0===t?void 0:t.type)==="production"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Production Bonus:"}),(0,a.jsxs)("span",{className:"font-semibold text-yellow-400",children:["+",(100*(r.totalBuildingBonusValue||l.bonus.value)).toFixed(0),"% Production"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Base Radius:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[l.bonus.radius," tiles"]})]}),r.radiusBonus&&r.radiusBonus>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Radius Bonus:"}),(0,a.jsxs)("span",{className:"font-semibold text-yellow-400",children:["+",r.radiusBonus," tiles"]})]})]}),(null===(s=l.bonus)||void 0===s?void 0:s.type)==="radiusIncrease"&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Radius Bonus:"}),(0,a.jsxs)("span",{className:"font-semibold text-blue-400",children:["+",l.bonus.value," to buildings"]})]}),"costReduction"===l.upgradeType&&o>1&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Cost Reduction:"}),(0,a.jsxs)("span",{className:"font-semibold text-green-400",children:[(100*N).toFixed(0),"%"]})]}),r.affectedBuildings&&r.affectedBuildings.length>0&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Boosting:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[r.affectedBuildings.length," buildings"]})]})]})]})})}var eG=s(4458);let eV=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eG.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...n})});eV.displayName=eG.fC.displayName;let eZ=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eG.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",s),...n})});eZ.displayName=eG.Ee.displayName;let eW=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eG.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...n})});eW.displayName=eG.NY.displayName;let eY=e=>{let{onAvatarClick:t}=e,{playerStats:s}=(0,b.g)(),{level:n,totalSeedsProduced:r,xpForCurrentLevel:l,xpForNextLevel:o,avatarUrl:d}=s,c=o>l?(r-l)/(o-l)*100:100,u=59*Math.PI;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)("button",{onClick:t,className:"relative w-20 h-20 focus:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded-full",children:[(0,a.jsxs)("svg",{height:"100%",width:"100%",viewBox:"0 0 74 74",className:"absolute top-0 left-0 -rotate-90",children:[(0,a.jsx)("circle",{stroke:"hsl(var(--secondary))",fill:"transparent",strokeWidth:5,r:29.5,cx:39.5,cy:39.5}),(0,a.jsx)("circle",{stroke:"hsl(var(--primary))",fill:"transparent",strokeWidth:5,strokeDasharray:u+" "+u,style:{strokeDashoffset:u-c/100*u,strokeLinecap:"round"},r:29.5,cx:39.5,cy:39.5})]}),(0,a.jsxs)(eV,{className:"w-16 h-16 absolute top-[47%] left-[53%] -translate-x-1/2 -translate-y-1/2 bg-[#D7C951]",children:[(0,a.jsx)(eZ,{src:d,"data-ai-hint":"pixel art avatar"}),(0,a.jsx)(eW,{children:(0,a.jsx)(eg.Z,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"absolute -bottom-1 left-[53%] -translate-x-1/2 w-8 h-6 bg-accent rounded-md flex items-center justify-center border-2 border-background",children:(0,a.jsx)("span",{className:"text-sm font-bold text-accent-foreground",children:n})})]})}),(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"text-lg text-center space-y-1",children:[(0,a.jsxs)("p",{className:"font-bold",children:["Level ",n]}),(0,a.jsxs)("p",{className:"text-base text-muted-foreground",children:[(0,i.u)(r)," / ",(0,i.u)(o)," Seeds"]}),(0,a.jsxs)("p",{className:"text-xs",children:["(",(0,i.u)(o-r)," to next level)"]}),(0,a.jsx)("p",{className:"text-xs pt-2",children:"Click to open settings."})]})})]})};function eq(e){let{onAvatarClick:t,onScreenshotClick:s,onGoHome:n,onWikiClick:r}=e,{playerStats:l,totalSeedsPerSecond:o}=(0,b.g)();return(0,a.jsx)(u,{children:(0,a.jsxs)("div",{"data-no-grid-interaction":"true",className:"w-100 fixed top-4 left-4 right-4 z-10 flex items-center justify-between md:justify-end gap-4 text-white font-bold",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 md:hidden",children:[(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg border-2 border-yellow-700/80 min-w-[180px] md:min-w-[200px]",style:{backgroundImage:"url('/items/floor_dirt.png')",backgroundSize:"cover"},children:[(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:40,height:40,unoptimized:!0}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-3xl leading-none",children:(0,i.l)(l.seeds)}),(0,a.jsxs)("span",{className:"text-md font-normal leading-none",children:[(0,i.u)(o),"/s"]})]})]})}),(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"text-lg space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Per Minute:"}),(0,a.jsx)("span",{className:"font-bold",children:(0,i.u)(60*o)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Per Hour:"}),(0,a.jsx)("span",{className:"font-bold",children:(0,i.u)(3600*o)})]})]})})]}),(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"default",size:"icon",className:"rounded-2xl w-12 h-12",onClick:n,children:(0,a.jsx)(f.default,{src:"/items/decoration_simple_house_front.png",alt:"Go Home",width:32,height:32,unoptimized:!0})})}),(0,a.jsx)(h,{children:(0,a.jsx)("p",{className:"text-lg",children:"Go Home"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"default",size:"icon",className:"rounded-2xl w-12 h-12 hidden md:flex",onClick:r,children:(0,a.jsx)(f.default,{src:"/items/icon_question_mark.png",alt:"Game Wiki",width:24,height:24,unoptimized:!0})})}),(0,a.jsx)(h,{children:(0,a.jsx)("p",{className:"text-lg",children:"Game Wiki"})})]}),(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"default",size:"icon",className:"rounded-2xl w-12 h-12 hidden md:flex",onClick:s,children:(0,a.jsx)(f.default,{src:"/items/icon_camera.png",alt:"Screenshot Mode",width:24,height:24,unoptimized:!0})})}),(0,a.jsx)(h,{children:(0,a.jsx)("p",{className:"text-lg",children:"Screenshot Mode"})})]}),(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsx)(d,{variant:"default",size:"icon",className:"rounded-2xl w-12 h-12  hidden md:flex",onClick:n,children:(0,a.jsx)(f.default,{src:"/items/decoration_simple_house_front.png",alt:"Go Home",width:32,height:32,unoptimized:!0})})}),(0,a.jsx)(h,{children:(0,a.jsx)("p",{className:"text-lg",children:"Go Home"})})]}),(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 rounded-lg border-2 border-yellow-700/80 min-w-[150px] md:min-w-[200px] hidden md:flex",style:{backgroundImage:"url('/items/floor_dirt.png')",backgroundSize:"cover"},children:[(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:40,height:40,unoptimized:!0}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-3xl leading-none",children:(0,i.l)(l.seeds)}),(0,a.jsxs)("span",{className:"text-md font-normal leading-none",children:[(0,i.u)(o),"/s"]})]})]})}),(0,a.jsx)(h,{children:(0,a.jsxs)("div",{className:"text-lg space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Per Minute:"}),(0,a.jsx)("span",{className:"font-bold",children:(0,i.u)(60*o)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Per Hour:"}),(0,a.jsx)("span",{className:"font-bold",children:(0,i.u)(3600*o)})]})]})})]}),(0,a.jsx)(eY,{onAvatarClick:t})]})]})})}var eH=s(2226);let eK=eH.fC;eH.xz,eH.x8;let eQ=eH.h_,eJ=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eH.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n,ref:t})});eJ.displayName=eH.aV.displayName;let eX=(0,l.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),e$=n.forwardRef((e,t)=>{let{side:s="right",className:n,children:r,...l}=e;return(0,a.jsxs)(eQ,{children:[(0,a.jsx)(eJ,{}),(0,a.jsxs)(eH.VY,{ref:t,className:(0,i.cn)(eX({side:s}),n),...l,children:[r,(0,a.jsxs)(eH.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});e$.displayName=eH.VY.displayName;let e0=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};e0.displayName="SheetHeader";let e1=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};e1.displayName="SheetFooter";let e2=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eH.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold text-foreground",s),...n})});e2.displayName=eH.Dx.displayName;let e4=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eH.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})});e4.displayName=eH.dk.displayName;var e5=s(23);let e6=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(e5.fC,{ref:t,className:(0,i.cn)("relative overflow-hidden",s),...r,children:[(0,a.jsx)(e5.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,a.jsx)(e3,{}),(0,a.jsx)(e5.Ns,{})]})});e6.displayName=e5.fC.displayName;let e3=n.forwardRef((e,t)=>{let{className:s,orientation:n="vertical",...r}=e;return(0,a.jsx)(e5.gb,{ref:t,orientation:n,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,a.jsx)(e5.q4,{className:"relative flex-1 rounded-full bg-border"})})});e3.displayName=e5.gb.displayName;var e8=s(4388),e9=s(8472),e7=s(9025),te=s(4236),tt=s(9646);let ts=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(tt.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...n,ref:t,children:(0,a.jsx)(tt.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ts.displayName=tt.fC.displayName;var ta=s(8364);let tn=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tr=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ta.f,{ref:t,className:(0,i.cn)(tn(),s),...n})});tr.displayName=ta.f.displayName;let tl=n.forwardRef((e,t)=>{let{className:s,type:n,...r}=e;return(0,a.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});tl.displayName="Input";var ti=JSON.parse('["Greenwood Valley","Whispering Woods","Sunpetal Fields","Verdant Hollow","The Shaded Grove","Willow Creek Farm","Mossy Dell","Goldenleaf Plantation","Silent Stream Gardens","The Fertile Crescent","Oakheart Valley","Seedling Sanctuary","Bloomwater Flats","The First Tree","Emberwood","Sylvan Meadows","Havenwood","Dewdrop Glade","Stonecreek Gardens","The Elderwood"]');let to=e=>{if(isNaN(e)||e<0)return"0s";let t=Math.floor(e/3600),s=Math.floor(e%3600/60),a="";return t>0&&(a+="".concat(t,"h ")),s>0&&(a+="".concat(s,"m ")),(a+="".concat(Math.floor(e%60),"s")).trim()};function td(e){let{isOpen:t,onOpenChange:s,onReset:r,worldSeed:l,gridData:o,rawGameState:c,isSoundEnabled:u,onToggleSound:m,isShortcutsEnabled:x,onToggleShortcuts:h,onWorldNameChange:p,onWikiClick:f}=e,{playerStats:g}=(0,b.g)(),[j,v]=(0,n.useState)(!1),[y,w]=(0,n.useState)(g.worldName);(0,n.useEffect)(()=>{t&&w(g.worldName)},[t,g.worldName]);let N=e=>{let{label:t,value:s}=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center bg-secondary/30 p-3 rounded-lg border border-border/50",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:t}),(0,a.jsx)("span",{className:"font-bold text-lg",children:s})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eK,{open:t,onOpenChange:s,children:(0,a.jsxs)(e$,{className:"w-[400px] sm:w-[540px] bg-background/95 backdrop-blur-sm flex flex-col","data-no-grid-interaction":"true",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,a.jsxs)(e0,{children:[(0,a.jsxs)(e2,{className:"flex items-center gap-2 text-2xl",children:[(0,a.jsx)(eT.settings,{className:"w-6 h-6"}),"Settings"]}),(0,a.jsx)(e4,{className:"text-base pt-2",children:"Manage your game settings and view world statistics."})]}),(0,a.jsx)(e6,{className:"flex-grow pr-6 -mr-6",children:(0,a.jsxs)("div",{className:"space-y-6 py-4 text-lg text-foreground/90",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2",children:"World Name"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tl,{id:"worldName",value:y,onChange:e=>{w(e.target.value)},onBlur:()=>{y!==g.worldName&&y.trim()?p(y.trim()):w(g.worldName)},onKeyDown:e=>e.stopPropagation(),className:"text-lg",maxLength:50}),(0,a.jsxs)(d,{variant:"outline",size:"icon",onClick:()=>{let e=ti[Math.floor(Math.random()*ti.length)];w(e),p(e)},children:[(0,a.jsx)(e8.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Randomize Name"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2",children:"Game Options"}),(0,a.jsxs)("div",{className:"space-y-2 text-base",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg border border-border/50 bg-secondary/30",children:[(0,a.jsx)(tr,{htmlFor:"sound-switch",className:"font-semibold cursor-pointer flex-grow",children:"Game Sounds"}),(0,a.jsx)(ts,{id:"sound-switch",checked:u,onCheckedChange:m})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg border border-border/50 bg-secondary/30",children:[(0,a.jsx)(tr,{htmlFor:"shortcuts-switch",className:"font-semibold cursor-pointer flex-grow",children:"Keyboard Navigation"}),(0,a.jsx)(ts,{id:"shortcuts-switch",checked:x,onCheckedChange:h})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg border border-border/50 bg-secondary/30",children:[(0,a.jsx)(tr,{htmlFor:"wiki-button",className:"font-semibold cursor-pointer flex-grow",children:"Game Wiki"}),(0,a.jsxs)(d,{id:"wiki-button",variant:"outline",size:"icon",onClick:f,children:[(0,a.jsx)(e9.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Open Wiki"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2",children:"Player Statistics"}),(0,a.jsxs)("div",{className:"space-y-2 text-base",children:[(0,a.jsx)(N,{label:"Total Time in World",value:to(g.totalTimePlayed)}),(0,a.jsx)(N,{label:"Total Seeds Produced",value:(0,i.u)(g.totalSeedsProduced)}),(0,a.jsx)(N,{label:"Manual Seeds Generated",value:(0,i.u)(g.manualSeedsGenerated)}),(0,a.jsx)(N,{label:"Upgrades Purchased",value:(0,i.u)(g.upgradesPurchased)}),(0,a.jsx)(N,{label:"Achievements Unlocked",value:"".concat(g.unlockedAchievements.length)}),(0,a.jsx)(N,{label:"Missions Completed",value:"".concat(g.completedMissions.length)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-bold text-xl text-destructive mb-2 flex items-center gap-2",children:[(0,a.jsx)(e7.Z,{className:"w-5 h-5"}),"Danger Zone"]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg border border-destructive/50 bg-destructive/10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:"Reset World"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"This action is irreversible."})]}),(0,a.jsxs)(d,{variant:"destructive",onClick:()=>v(!0),children:[(0,a.jsx)(eT.reset,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]})}),(0,a.jsx)(e1,{className:"mt-auto pt-4 border-t border-border/50",children:(0,a.jsx)(F,{type:"single",collapsible:!0,className:"w-full",children:(0,a.jsxs)(U,{value:"advanced",className:"border-none",children:[(0,a.jsx)(A,{className:"text-base text-muted-foreground hover:no-underline hover:text-foreground",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(te.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Advanced Info"})]})}),(0,a.jsx)(O,{children:(0,a.jsxs)("div",{className:"space-y-4 text-sm pt-2",children:[c&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-yellow-400 mb-1",children:"Debug Info"}),(0,a.jsxs)("div",{className:"space-y-1 p-2 rounded-lg border border-yellow-400/50 font-mono bg-black/30 text-xs",children:[(0,a.jsxs)("p",{children:["isRaining: ",(0,a.jsx)("span",{className:"text-yellow-300",children:JSON.stringify(c.isRaining)})]}),c.isRaining&&c.rainStartTime>0&&(0,a.jsxs)("p",{children:["Time Left: ",(0,a.jsxs)("span",{className:"text-yellow-300",children:[Math.max(0,300-(c.lastSaveTimestamp-c.rainStartTime)/1e3).toFixed(0),"s"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-muted-foreground mb-1",children:"Validation"}),(0,a.jsxs)("div",{className:"space-y-2 text-xs p-2 rounded-lg border border-border/50 font-mono bg-black/30",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"opacity-80",children:"World Seed:"}),(0,a.jsx)("p",{className:"break-words",children:l})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"opacity-80",children:"Checksum:"}),(0,a.jsx)("p",{className:"break-words",children:(null==c?void 0:c.checksum)||"N/A"})]})]})]})]})})]})})})]})}),(0,a.jsx)(eI,{open:j,onOpenChange:v,children:(0,a.jsxs)(eE,{onKeyDown:e=>e.stopPropagation(),children:[(0,a.jsxs)(eP,{children:[(0,a.jsx)(eF,{children:"Are you sure you want to reset?"}),(0,a.jsx)(eU,{children:"This will permanently delete your current world and all of its progress. A new world will be generated."})]}),(0,a.jsxs)(eD,{children:[(0,a.jsx)(eO,{children:"Cancel"}),(0,a.jsx)(eA,{onClick:()=>{r(),v(!1)},children:"Reset World"})]})]})})]})}var tc=s(3302);let tu="arborea-idle-savegame";function tm(e){let{level:t,reward:s}=e;return(0,a.jsxs)("div",{className:"w-[350px] min-h-[60px] overflow-hidden relative border-2 border-primary/50 backdrop-blur-md rounded-lg px-4 py-2 flex items-center gap-4","data-no-grid-interaction":"true",children:[(0,a.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundImage:"url('/items/floor_grass.png')",backgroundSize:"cover"}}),(0,a.jsx)("div",{className:"absolute inset-0 z-0 bg-black/20"}),(0,a.jsxs)("div",{className:"relative z-10 flex-grow",children:[(0,a.jsx)("p",{className:"text-white/80 text-sm font-bold leading-tight flex items-center gap-1",children:"Level Up!"}),(0,a.jsxs)("p",{className:"text-white font-semibold text-base leading-tight",children:["You've reached Level ",t]}),(0,a.jsxs)("p",{className:"text-white text-sm mt-1 flex items-center gap-1",children:["+",(0,i.u)(s)," seeds"]})]})]})}function tx(e){let{achievement:t}=e;return(0,a.jsxs)("div",{className:"w-[350px] min-h-[60px] overflow-hidden relative border-2 border-white/30 backdrop-blur-md rounded-lg px-4 py-2 flex items-center gap-4","data-no-grid-interaction":"true",children:[(0,a.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundImage:"url('/items/floor_grass.png')",backgroundSize:"cover"}}),(0,a.jsx)("div",{className:"absolute inset-0 z-0 bg-black/20"}),(0,a.jsxs)("div",{className:"relative z-10 flex-grow",children:[(0,a.jsx)("p",{className:"text-white/80 text-sm font-bold leading-tight",children:"Achievement Unlocked!"}),(0,a.jsx)("p",{className:"text-white font-semibold text-base leading-tight",children:t.name}),(0,a.jsx)("p",{className:"text-white text-sm mt-1",children:t.reward.description})]})]})}function th(e){let{id:t,value:s,x:r,y:l,onAnimationEnd:i}=e;return(0,n.useEffect)(()=>{let e=setTimeout(i,1200);return()=>clearTimeout(e)},[i]),(0,a.jsx)("div",{className:"absolute z-50 text-2xl font-bold text-white drop-shadow-lg pointer-events-none animate-float-up",style:{left:r,top:l,transform:"translateX(-50%)"},children:s})}let tp=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",s),...n})})});tp.displayName="Table";let tf=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",s),...n})});tf.displayName="TableHeader";let tg=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",s),...n})});tg.displayName="TableBody",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...n})}).displayName="TableFooter";let tb=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...n})});tb.displayName="TableRow";let tj=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...n})});tj.displayName="TableHead";let tv=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...n})});tv.displayName="TableCell",n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",s),...n})}).displayName="TableCaption";var ty=JSON.parse('[{"keys":["W","A","S","D"],"action":"Pan the map","context":"Map View"},{"keys":["Arrow Keys"],"action":"Pan the map","context":"Map View"},{"keys":["Spacebar + Drag"],"action":"Pan the map","context":"Map View"},{"keys":["Mouse Wheel"],"action":"Zoom in / out","context":"Map View"},{"keys":["Right Click"],"action":"Toggle between Pan/Select modes","context":"Map View"},{"keys":["Escape"],"action":"Close UI / Clear selection","context":"General"},{"keys":["Enter"],"action":"Finish editing","context":"Edit Mode"},{"keys":["Delete","Backspace"],"action":"Delete selected items","context":"Edit Mode"}]'),tw=s(8362),tN=s(7673);let tS=tw.fC;tw.ZA;let tk=tw.B4,tC=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(tw.xz,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[n,(0,a.jsx)(tw.JO,{asChild:!0,children:(0,a.jsx)(D.Z,{className:"h-4 w-4 opacity-50"})})]})});tC.displayName=tw.xz.displayName;let tT=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(tw.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(tN.Z,{className:"h-4 w-4"})})});tT.displayName=tw.u_.displayName;let t_=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(tw.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",s),...n,children:(0,a.jsx)(D.Z,{className:"h-4 w-4"})})});t_.displayName=tw.$G.displayName;let tz=n.forwardRef((e,t)=>{let{className:s,children:n,position:r="popper",...l}=e;return(0,a.jsx)(tw.h_,{children:(0,a.jsxs)(tw.VY,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...l,children:[(0,a.jsx)(tT,{}),(0,a.jsx)(tw.l_,{className:(0,i.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(t_,{})]})})});tz.displayName=tw.VY.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(tw.__,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n})}).displayName=tw.__.displayName;let tI=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(tw.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(tw.wU,{children:(0,a.jsx)(em.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(tw.eT,{children:n})]})});tI.displayName=tw.ck.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(tw.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",s),...n})}).displayName=tw.Z0.displayName;let tM=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("kbd",{ref:t,className:(0,i.cn)("h-5 min-w-[20px] inline-flex items-center justify-center rounded bg-background border border-border px-1.5 font-mono text-xs font-medium text-muted-foreground",s),...n})});tM.displayName="Kbd";let tR=e=>{if(!e.bonus)return"N/A";if("production"===e.bonus.type){let t=e.bonus.appliesTo.map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(", ");return"+".concat(100*e.bonus.value,"% production to ").concat(t," within ").concat(e.bonus.radius," tiles.")}return"radiusIncrease"===e.bonus.type?"+".concat(e.bonus.value," radius to Buildings within ").concat(e.bonus.radius," tiles."):"costReduction"===e.upgradeType?"-".concat(100*g.ez.costReductionValue,"% to own cost per upgrade level."):"N/A"},tE=[1,2,3,4,5,10,25,50,100],tP=e=>{let{condition:t}=e;switch(t.type){case"totalSeeds":return"Produce ".concat((0,i.u)(t.value)," total Seeds");case"itemCount":var s;let a=t.category?t.category.charAt(0).toUpperCase()+t.category.slice(1)+"s":(null===(s=C.find(e=>e.id===t.itemId))||void 0===s?void 0:s.name)||"items";return"Own ".concat(t.value," ").concat(a);case"level":return"Reach Level ".concat(t.value);default:return"Unknown condition"}};function tD(e){let{isOpen:t,onOpenChange:s,items:r}=e,[l,o]=(0,n.useState)(null),d=e=>{var t;return e?(null===(t=r.find(t=>t.id===e))||void 0===t?void 0:t.name)||"items":""},{crops:c,buildings:u,roadsAndDecorations:m,upgradeableItems:x}=(0,n.useMemo)(()=>{let e=[...r].sort((e,t)=>(e.difficulty||0)-(t.difficulty||0)),t=e.filter(e=>["tree","flower","vegetable"].includes(e.category));return{crops:t,buildings:e.filter(e=>"building"===e.category),roadsAndDecorations:e.filter(e=>["road","decoration"].includes(e.category)),upgradeableItems:e.filter(e=>e.seedsPerSecond>0||e.bonus&&"production"===e.bonus.type||"costReduction"===e.upgradeType)}},[r]),h=(0,n.useMemo)(()=>Object.entries(g.LQ).map(e=>{let[t,s]=e;return{category:t,...s}}),[]),b=(0,n.useMemo)(()=>l?r.find(e=>e.id===l):null,[l,r]),j=(0,n.useMemo)(()=>{if(!b)return[];let e="building"===b.category,t="costReduction"===b.upgradeType,s=t?g.ez:e?g.aY:g.DJ,a=0,n=0;return tE.map(e=>{let r=0,l=0;for(let t=1;t<e;t++){var i,o;r+=(i=b.cost*s.costMultiplier,o=t,Math.floor(i*Math.pow(s.costFactor,o-1)))}let d="",c=b.seedsPerSecond;if(e>1){if(l=r-a,t){let t=g.ez.costReductionValue;d="-".concat(((1-Math.pow(1-t,e-1))*100).toFixed(0),"% cost"),c=b.seedsPerSecond}else{let t=(e-1)*s.productionMultiplier;d="+".concat((100*t).toFixed(0),"%"),c=b.seedsPerSecond*(1+t)}}else l=b.cost,d="N/A";let u=Math.floor((s.itemCountRequirement||10)*Math.pow(s.itemCountRequirementFactor,e-1)),m=c*u,x="∞";if(1===e)m>0&&(x=(b.cost*u/m/60).toFixed(2));else{let e=(c-n)*u;e>0&&(x=(l/e/60).toFixed(2))}return a=r,n=c,{level:e,cumulativeCost:r,bonusDescription:d,productionSps:c,requiredUnits:u,totalProduction:m,paybackMinutes:x}})},[b]);return(0,a.jsx)(eK,{open:t,onOpenChange:s,children:(0,a.jsxs)(e$,{className:"w-full sm:max-w-[720px] md:max-w-[920px] bg-background/95 backdrop-blur-sm flex flex-col","data-no-grid-interaction":"true",children:[(0,a.jsxs)(e0,{children:[(0,a.jsxs)(e2,{className:"flex items-center gap-2 text-2xl",children:[(0,a.jsx)(eT.logo,{className:"w-6 h-6"}),"Seeds Valley Idle - Game Wiki"]}),(0,a.jsx)(e4,{className:"text-base pt-2",children:"Your guide to the mechanics and world of Seeds Valley."})]}),(0,a.jsxs)(L,{defaultValue:"introduction",className:"flex flex-col flex-grow min-h-0",children:[(0,a.jsxs)(G,{className:"w-full justify-start rounded-none bg-transparent p-0 border-b overflow-x-auto",children:[(0,a.jsx)(V,{value:"introduction",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none",children:"Introduction"}),!1,(0,a.jsx)(V,{value:"controls",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none",children:"Controls"}),(0,a.jsx)(V,{value:"items",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none",children:"Items"}),(0,a.jsx)(V,{value:"groups",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none",children:"Groups"}),!1,(0,a.jsx)(V,{value:"achievements",className:"rounded-none border-b-2 border-transparent data-[state=active]:border-primary data-[state=active]:shadow-none",children:"Achievements"})]}),(0,a.jsxs)(e6,{className:"flex-grow mt-4 pr-6 -mr-6",children:[(0,a.jsx)(Z,{value:"introduction",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-6 text-lg text-foreground/90",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Welcome to Seeds Valley Idle"}),(0,a.jsx)("p",{className:"text-base mt-2",children:"Seeds Valley Idle is a tranquil idle game about cultivating a vast, procedurally generated world. Your main goal is to generate the universal currency, Seeds (\uD83C\uDF31), to purchase new items, unlock powerful upgrades, and expand your world infinitely."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Core Gameplay Loop"}),(0,a.jsxs)("ol",{className:"list-decimal pl-5 mt-2 space-y-3 text-base",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Manual Generation:"})," Start by clicking the large Seed button at the bottom of the screen to manually gather your first Seeds."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Passive Income:"})," Use your Seeds to buy items like Flowers, Vegetables, and Trees from the shop on the left. Once placed, these items will generate Seeds for you automatically, even while you're away."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Strategic Placement:"})," The key to massive production lies in how you arrange your items. This is where the core strategy of the game unfolds."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Upgrade Everything:"})," As your income grows, you'll unlock permanent upgrades for your items, groups, and even global stats. Reinvesting your Seeds into these upgrades is crucial for progressing."]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Key Mechanics"}),(0,a.jsxs)("ul",{className:"list-disc pl-5 mt-2 space-y-4 text-base",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Group Synergies:"})," Placing a large number of items from the same category (e.g., 25 Trees) adjacent to each other forms a special group (a Forest). Every item in the group receives a massive production bonus. Experiment with creating Forests, Gardens, and Plantations to maximize your output."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Building Bonuses:"})," Buildings like the Well provide a percentage-based production bonus to all crops within their radius. The bonuses from different buildings stack, so a clever layout can lead to exponential growth."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Upgrade System:"})," The Upgrades panel on the right is your path to power. You can upgrade individual items (e.g., make all Daisies produce more), enhance group bonuses (make all Forests more potent), and boost global stats like total production and click power."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Infinite World:"})," The world is endless. As you pan to the edge of the known map, new territory will be procedurally generated for you to explore and cultivate."]})]})]})]})}),(0,a.jsx)(Z,{value:"formulas",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-6 text-lg text-foreground/90 font-code",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2 font-sans",children:"Final Seeds per Second (SPS)"}),(0,a.jsx)("p",{className:"text-base mb-4 font-sans",children:"The production of each individual item is determined by a series of multiplicative bonuses."}),(0,a.jsx)("div",{className:"bg-secondary/30 p-4 rounded-lg border border-border/50 text-base",children:(0,a.jsx)("p",{children:"FinalSPS = (BaseSPS * ItemLevelBonus) * (1 + GroupBonus + BuildingBonus + WaterBonus) * GlobalMultiplier * CategoryMultiplier"})}),(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-3 mt-4 text-sm font-sans",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"BaseSPS"}),": The default production rate of an item, defined in `items.json`."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"ItemLevelBonus"}),": `1 + ((ItemLevel - 1) * ",g.DJ.productionMultiplier,")`. Each level adds a multiplicative bonus to the item's own base production."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"GroupBonus"}),": `BaseGroupBonus + ((GroupLevel - 1) * ",g.tS.bonusMultiplier,")`. This is the bonus for forming a large group (e.g., a Forest). It's increased by purchasing Group Upgrades."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"BuildingBonus"}),": The sum of all bonuses from nearby buildings. Each building's bonus is `BaseBuildingBonus + ((BuildingLevel - 1) * ",g.aY.bonusValueIncrease,")`."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"WaterBonus"}),": A flat `",100*g.ir,"%` bonus if an item is adjacent to a water tile."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"GlobalMultiplier"}),': The sum of all permanent global production multipliers from the "Global Production" upgrade and any relevant unlocked achievements.']}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"CategoryMultiplier"}),": The sum of all permanent category-specific multipliers from unlocked achievements."]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2 font-sans",children:"Manual Click Value"}),(0,a.jsx)("div",{className:"bg-secondary/30 p-4 rounded-lg border border-border/50 text-base",children:(0,a.jsx)("p",{children:"ClickValue = BaseClickValue * (1 + TotalClickBonus)"})}),(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-3 mt-4 text-sm font-sans",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"BaseClickValue"})," is always 1."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"TotalClickBonus"}),' is the sum of all bonuses from the "Click Power" global upgrade (`+',100*g.SR.click.bonusValue,"%`) and any relevant unlocked achievements."]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2 font-sans",children:"Item Placement Cost"}),(0,a.jsx)("div",{className:"bg-secondary/30 p-4 rounded-lg border border-border/50 text-base",children:(0,a.jsx)("p",{children:"CurrentCost = BaseCost * (CostFactor ^ OwnedCount)"})}),(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-3 mt-4 text-sm font-sans",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"BaseCost"})," and ",(0,a.jsx)("strong",{children:"CostFactor"})," are defined per item in `items.json`."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"OwnedCount"})," is the number of that specific item you currently own."]}),(0,a.jsx)("li",{children:"Items with a `CostFactor` of 1 do not increase in price."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2 font-sans",children:"Upgrade Cost"}),(0,a.jsx)("div",{className:"bg-secondary/30 p-4 rounded-lg border border-border/50 text-base",children:(0,a.jsx)("p",{children:"UpgradeCost = BaseUpgradeCost * (UpgradeCostFactor ^ (CurrentLevel - 1))"})}),(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-3 mt-4 text-sm font-sans",children:[(0,a.jsx)("li",{children:"The base costs and cost factors for each upgrade type (Item, Group, Global) are defined in `rules.json`."}),(0,a.jsxs)("li",{children:["For item upgrades, the `BaseUpgradeCost` is `ItemBaseCost * ",g.DJ.costMultiplier,"`."]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2 font-sans",children:"Player Level XP"}),(0,a.jsx)("div",{className:"bg-secondary/30 p-4 rounded-lg border border-border/50 text-base",children:(0,a.jsxs)("p",{children:["XP for Next Level = ",T(2)," * (",g.OF.ei," ^ (CurrentLevel - 1))"]})}),(0,a.jsxs)("p",{className:"text-sm mt-2 font-sans",children:["XP is your total seeds produced. Level 1 requires 0 XP. Level 2 requires ",T(2)," XP."]})]})]})}),(0,a.jsx)(Z,{value:"controls",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-4 text-lg text-foreground/90",children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Controls & Shortcuts"}),(0,a.jsx)("p",{className:"text-base",children:"Use these controls to navigate your world and manage your items efficiently."}),(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(tp,{children:[(0,a.jsx)(tf,{children:(0,a.jsxs)(tb,{children:[(0,a.jsx)(tj,{className:"w-[150px] md:w-[250px]",children:"Action"}),(0,a.jsx)(tj,{children:"Keys"}),(0,a.jsx)(tj,{className:"hidden md:table-cell",children:"Context"})]})}),(0,a.jsx)(tg,{children:ty.map(e=>(0,a.jsxs)(tb,{children:[(0,a.jsx)(tv,{className:"font-medium",children:e.action}),(0,a.jsx)(tv,{children:(0,a.jsx)("div",{className:"flex items-center gap-1",children:e.keys.map(e=>(0,a.jsx)(tM,{children:e},e))})}),(0,a.jsx)(tv,{className:"hidden md:table-cell",children:e.context})]},e.action))})]})})]})}),(0,a.jsxs)(Z,{value:"items",className:"mt-0 space-y-8 relative",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-primary mb-2",children:"Crops"}),(0,a.jsx)("p",{className:"text-base text-muted-foreground mb-4",children:"Crops are your primary source of passive Seed generation. Group them together for production bonuses."}),(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(tp,{children:[(0,a.jsx)(tf,{children:(0,a.jsxs)(tb,{children:[(0,a.jsx)(tj,{className:"w-[150px] md:w-[200px]",children:"Name"}),(0,a.jsx)(tj,{className:"hidden md:table-cell",children:"Category"}),(0,a.jsx)(tj,{className:"text-right",children:"Base Cost"}),(0,a.jsx)(tj,{className:"text-right",children:"Base SPS"}),(0,a.jsx)(tj,{className:"hidden sm:table-cell text-right",children:"Payback (min)"}),(0,a.jsx)(tj,{className:"hidden md:table-cell text-right",children:"Unlocks at"})]})}),(0,a.jsx)(tg,{children:c.map(e=>{let t=e.seedsPerSecond>0?(e.cost/e.seedsPerSecond/60).toFixed(2):"∞";return(0,a.jsxs)(tb,{children:[(0,a.jsxs)(tv,{className:"font-medium flex items-center gap-3",children:[e.imageUrl?(0,a.jsx)(f.default,{src:e.imageUrl,alt:e.name,width:24,height:24,unoptimized:!0}):(0,a.jsx)("span",{className:"text-xl w-6 text-center",children:e.emoji}),e.name]}),(0,a.jsx)(tv,{className:"capitalize hidden md:table-cell",children:e.category}),(0,a.jsx)(tv,{className:"text-right",children:(0,i.u)(e.cost)}),(0,a.jsx)(tv,{className:"text-right",children:e.seedsPerSecond.toFixed(2)}),(0,a.jsx)(tv,{className:"text-right hidden sm:table-cell",children:t}),(0,a.jsx)(tv,{className:"text-right hidden md:table-cell",children:e.requiredItemCount?"".concat(e.requiredItemCount," ").concat(d(e.requiredItemId)):"Start"})]},e.id)})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-primary mb-2",children:"Buildings"}),(0,a.jsx)("p",{className:"text-base text-muted-foreground mb-4",children:"Buildings provide powerful bonuses to nearby items or generate seeds themselves."}),(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(tp,{children:[(0,a.jsx)(tf,{children:(0,a.jsxs)(tb,{children:[(0,a.jsx)(tj,{className:"w-[150px] md:w-[200px]",children:"Name"}),(0,a.jsx)(tj,{children:"Bonus"}),(0,a.jsx)(tj,{className:"hidden md:table-cell text-right",children:"Base Cost"}),(0,a.jsx)(tj,{className:"hidden md:table-cell text-right",children:"Unlocks at"})]})}),(0,a.jsx)(tg,{children:u.map(e=>(0,a.jsxs)(tb,{children:[(0,a.jsxs)(tv,{className:"font-medium flex items-center gap-3",children:[e.imageUrl?(0,a.jsx)(f.default,{src:e.imageUrl,alt:e.name,width:24,height:24,unoptimized:!0}):(0,a.jsx)("span",{className:"text-xl w-6 text-center",children:e.emoji}),e.name]}),(0,a.jsx)(tv,{className:"text-sm",children:tR(e)}),(0,a.jsx)(tv,{className:"text-right hidden md:table-cell",children:(0,i.u)(e.cost)}),(0,a.jsx)(tv,{className:"text-right hidden md:table-cell",children:e.requiredItemCount?"".concat(e.requiredItemCount," ").concat(d(e.requiredItemId)):"Start"})]},e.id))})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-primary mb-2",children:"Roads & Decorations"}),(0,a.jsx)("p",{className:"text-base text-muted-foreground mb-4",children:"These items are purely aesthetic and do not generate seeds or provide bonuses."}),(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(tp,{children:[(0,a.jsx)(tf,{children:(0,a.jsxs)(tb,{children:[(0,a.jsx)(tj,{className:"w-[150px] md:w-[250px]",children:"Name"}),(0,a.jsx)(tj,{className:"hidden md:table-cell",children:"Category"}),(0,a.jsx)(tj,{className:"text-right",children:"Cost"}),(0,a.jsx)(tj,{className:"hidden md:table-cell text-right",children:"Unlocks at"})]})}),(0,a.jsx)(tg,{children:m.map(e=>(0,a.jsxs)(tb,{children:[(0,a.jsxs)(tv,{className:"font-medium flex items-center gap-3",children:[e.imageUrl?(0,a.jsx)(f.default,{src:e.imageUrl,alt:e.name,width:24,height:24,unoptimized:!0}):(0,a.jsx)("span",{className:"text-xl w-6 text-center",children:e.emoji}),e.name]}),(0,a.jsx)(tv,{className:"capitalize hidden md:table-cell",children:e.category}),(0,a.jsx)(tv,{className:"text-right",children:(0,i.u)(e.cost)}),(0,a.jsx)(tv,{className:"text-right hidden md:table-cell",children:e.requiredItemCount?"".concat(e.requiredItemCount," ").concat(d(e.requiredItemId)):"Start"})]},e.id))})]})})]})]}),(0,a.jsx)(Z,{value:"groups",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-4 text-lg text-foreground/90",children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Group Synergies"}),(0,a.jsx)("p",{className:"text-base",children:"Placing a sufficient number of items from the same category (e.g., Trees, Flowers) adjacent to each other will form a special group, like a Forest or Garden. Every item within that group receives a significant production bonus."}),(0,a.jsx)("p",{className:"text-base",children:"The bonus from a group stacks with other bonuses, like those from Buildings. Furthermore, group bonuses can be increased by purchasing upgrades from the Upgrades panel on the right of the screen."}),(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mt-6",children:"Group Types"}),(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(tp,{children:[(0,a.jsx)(tf,{children:(0,a.jsxs)(tb,{children:[(0,a.jsx)(tj,{children:"Group Name"}),(0,a.jsx)(tj,{children:"Item Category"}),(0,a.jsx)(tj,{className:"text-right",children:"Items Required"}),(0,a.jsx)(tj,{className:"text-right",children:"Base Bonus"})]})}),(0,a.jsx)(tg,{children:h.map(e=>{let t=p[e.category];return(0,a.jsxs)(tb,{children:[(0,a.jsx)(tv,{className:"font-medium items-center gap-3",children:e.name}),(0,a.jsxs)(tv,{className:"capitalize flex items-center gap-2",children:[t.icon.startsWith("/")?(0,a.jsx)(f.default,{src:t.icon,alt:t.name,width:24,height:24,unoptimized:!0}):(0,a.jsx)("span",{className:"text-xl w-6 text-center",children:t.icon}),t.name]}),(0,a.jsx)(tv,{className:"text-right",children:e.threshold}),(0,a.jsxs)(tv,{className:"text-right text-green-400 font-semibold",children:["+",100*e.bonus,"%"]})]},e.name)})})]})})]})}),(0,a.jsx)(Z,{value:"upgrades",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-6 text-lg text-foreground/90",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Upgrades System"}),(0,a.jsx)("p",{className:"text-base mt-2",children:"Upgrades are permanent improvements that boost your production and clicking power. They are essential for progressing in the late game. Available upgrades appear in the panel on the right side of the screen when you meet their unlock requirements."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Item Upgrades"}),(0,a.jsx)("p",{className:"text-base mt-2",children:"These upgrades apply to a specific type of item (e.g., all Daisies or all Wells). They become available once you own a certain number of that item."}),(0,a.jsxs)("ul",{className:"list-disc pl-5 mt-2 space-y-2 text-base",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Production Upgrades:"})," Each level provides a ",(0,a.jsxs)("strong",{className:"text-blue-400",children:["+",100*g.DJ.productionMultiplier,"%"]})," bonus to the production of that item. This bonus is multiplicative with other bonuses."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Cost Reduction Upgrades:"})," Each level provides a ",(0,a.jsxs)("strong",{className:"text-yellow-400",children:["-",100*g.ez.costReductionValue,"%"]})," cost reduction for future purchases of that item."]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Group Upgrades"}),(0,a.jsx)("p",{className:"text-base mt-2",children:"These upgrades enhance the production bonus you get from forming large groups like Forests, Gardens, and Plantations. They become available after you've formed at least one of that group type."}),(0,a.jsx)("ul",{className:"list-disc pl-5 mt-2 space-y-2 text-base",children:(0,a.jsxs)("li",{children:["Each level adds a ",(0,a.jsxs)("strong",{className:"text-green-400",children:["+",100*g.tS.bonusMultiplier,"%"]})," bonus to the group's total production multiplier."]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Global Upgrades"}),(0,a.jsx)("p",{className:"text-base mt-2",children:"Global upgrades affect your entire economy and become available as you reach certain total production milestones."}),(0,a.jsxs)("ul",{className:"list-disc pl-5 mt-2 space-y-2 text-base",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Global Production:"})," Each level provides a ",(0,a.jsxs)("strong",{className:"text-yellow-400",children:["+",100*g.SR.production.bonusValue,"%"]})," bonus to your total seeds per second."]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Click Power:"})," Each level adds a ",(0,a.jsxs)("strong",{className:"text-yellow-400",children:["+",100*g.SR.click.bonusValue,"%"]})," bonus to your manual clicks."]})]})]}),(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Upgrade Progression Simulator"}),(0,a.jsx)("p",{className:"text-base mt-2 mb-4",children:"Select an item to see how its upgrade costs and benefits scale over time."}),(0,a.jsx)("div",{className:"w-full max-w-sm mb-4",children:(0,a.jsxs)(tS,{onValueChange:o,children:[(0,a.jsx)(tC,{children:(0,a.jsx)(tk,{placeholder:"Select an item to simulate..."})}),(0,a.jsx)(tz,{children:x.map(e=>(0,a.jsx)(tI,{value:e.id,children:e.name},e.id))})]})}),b&&(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)(tp,{children:[(0,a.jsx)(tf,{children:(0,a.jsxs)(tb,{children:[(0,a.jsx)(tj,{children:"Level"}),(0,a.jsx)(tj,{className:"text-right",children:"Total Cost to Reach"}),(0,a.jsx)(tj,{className:"hidden md:table-cell text-right",children:"Bonus"}),(0,a.jsx)(tj,{className:"text-right",children:"Production (SPS)"}),(0,a.jsx)(tj,{className:"hidden md:table-cell text-right",children:"Units to Upgrade"}),(0,a.jsx)(tj,{className:"hidden sm:table-cell text-right",children:"Total Production"}),(0,a.jsx)(tj,{className:"hidden sm:table-cell text-right",children:"Payback (min)"})]})}),(0,a.jsx)(tg,{children:j.map(e=>(0,a.jsxs)(tb,{children:[(0,a.jsx)(tv,{className:"font-bold",children:e.level}),(0,a.jsx)(tv,{className:"text-right",children:(0,i.u)(e.cumulativeCost)}),(0,a.jsx)(tv,{className:"text-right text-blue-400 font-semibold hidden md:table-cell",children:e.bonusDescription}),(0,a.jsx)(tv,{className:"text-right",children:e.productionSps.toFixed(2)}),(0,a.jsx)(tv,{className:"text-right hidden md:table-cell",children:e.requiredUnits}),(0,a.jsx)(tv,{className:"text-right font-bold hidden sm:table-cell",children:(0,i.u)(e.totalProduction)}),(0,a.jsx)(tv,{className:"text-right hidden sm:table-cell",children:e.paybackMinutes})]},e.level))})]})})]})]})}),(0,a.jsx)(Z,{value:"achievements",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-4 text-lg text-foreground/90",children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary",children:"Achievements"}),(0,a.jsx)("p",{className:"text-base",children:"Achievements are special milestones that reward you for progressing in the game. Unlocking them can grant you instant Seed bonuses or permanent boosts to your production."}),(0,a.jsx)("div",{className:"relative w-full overflow-auto mt-6",children:(0,a.jsxs)(tp,{children:[(0,a.jsx)(tf,{children:(0,a.jsxs)(tb,{children:[(0,a.jsx)(tj,{className:"w-[150px] md:w-[250px]",children:"Achievement"}),(0,a.jsx)(tj,{children:"Unlock Condition"}),(0,a.jsx)(tj,{children:"Reward"})]})}),(0,a.jsx)(tg,{children:C.map(e=>(0,a.jsxs)(tb,{children:[(0,a.jsx)(tv,{className:"font-medium",children:e.name}),(0,a.jsx)(tv,{children:tP(e)}),(0,a.jsx)(tv,{className:"font-semibold text-green-400",children:e.reward.description})]},e.id))})]})})]})})]})]})]})})}var tF=s(9242),tU=s(4238);let tA={},tO=e=>(tA[e]||(tA[e]=tU.xEZ.from(e,{scaleMode:"nearest"})),tA[e]);function tB(e){let{itemToPreview:t,coords:s,isBlocked:n}=e,{x:r,y:l}=s,i=t.width||1,o=t.height||1,d=t.bonus,c=d?t.bonus.radius:0,u=2*c+i,m=2*c+o,x=r+i/2-u/2,h=l+o/2-m/2;return(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)(tF.TC,{draw:e=>{e.clear(),e.beginFill(n?15680580:3900150,.15),e.drawRect(64*x,64*h,64*u,64*m),e.endFill()},zIndex:1e4}),(0,a.jsx)(tF.jy,{texture:tO(t.imageUrl),anchor:{x:.5,y:1},x:(r+i/2)*64,y:(l+o)*64,width:64*i,height:64*o,alpha:.6,zIndex:10001}),(0,a.jsx)(tF.TC,{draw:e=>{e.clear(),e.lineStyle(2,n?15680580:16777215,.8),e.drawRect(64*r,64*l,64*i,64*o)},zIndex:10002})]})}let tL=[[0,3],[0,2],[1,3],[1,2],[0,0],[0,1],[1,0],[1,1],[3,3],[3,2],[2,3],[2,2],[3,0],[3,1],[2,0],[2,1]],tG=e=>{let t=e.target;for(;t;){var s;if(null===(s=t.dataset)||void 0===s?void 0:s.noGridInteraction)return!0;if("game-canvas-container"===t.id||"CANVAS"===t.tagName)break;t=t.parentElement}return!1},tV={},tZ={},tW=e=>(tV[e]||(tV[e]=tU.xEZ.from(e)),tV[e]),tY=e=>{if(tZ[e])return tZ[e];let t=tU.VL4.from(e,{scaleMode:"nearest"}),s=[];tZ[e]=s;let a=()=>{if(t.valid)for(let e=0;e<16;e++){let a=tL[e]||[0,0],n=16*a[0],r=16*a[1],l=new tU.AeJ(n,r,16,16);s[e]?(s[e].frame=l,s[e].updateUvs()):s[e]=new tU.xEZ(t,l)}};return t.valid?a():t.on("update",a),s},tq=e=>{let{tile:t,itemInfo:s,isSelected:n,isInGroup:r,isSourceOfBonus:l,isInBonusRadius:i,isWaterAdjacent:o,dirtAutotileTextures:d,grassAutotileTextures:c,stoneAutotileTextures:u}=e,{x:m,y:x,type:h,item:p,dirtAutotile:f,grassAutotile:g,stoneAutotile:b}=t,j=s&&(!(null==p?void 0:p.rootTile)||p.rootTile.x===m&&p.rootTile.y===x),v=(null==s?void 0:s.width)||1,y=(null==s?void 0:s.height)||1;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tF.jy,{texture:tW("/items/floor_water.png"),x:64*m,y:64*x,width:64,height:64,zIndex:x}),("dirt"===h||"grass"===h||"stone"===h)&&d[f]&&(0,a.jsx)(tF.jy,{texture:d[f],x:64*m,y:64*x,width:64,height:64,zIndex:x+.1}),("grass"===h||"stone"===h)&&c[g]&&(0,a.jsx)(tF.jy,{texture:c[g],x:64*m,y:64*x,width:64,height:64,zIndex:x+.2}),"stone"===h&&u[b]&&(0,a.jsx)(tF.jy,{texture:u[b],x:64*m,y:64*x,width:64,height:64,zIndex:x+.3}),o&&p&&(0,a.jsx)(tF.TC,{draw:e=>{e.clear(),e.beginFill(2450411,.15),e.drawRect(64*m,64*x,64,64),e.endFill()},zIndex:x+.35}),r&&(0,a.jsx)(tF.TC,{draw:e=>{e.clear(),e.beginFill(16777215,.1),e.drawRect(64*m,64*x,64,64),e.endFill()},zIndex:x+.4}),i&&!l&&(0,a.jsx)(tF.TC,{draw:e=>{e.clear(),e.beginFill(0,.1),e.drawRect(64*m,64*x,64,64),e.endFill()},zIndex:x+.5}),l&&(0,a.jsx)(tF.TC,{draw:e=>{e.clear(),e.beginFill(16498468,.25),e.drawRect(64*m,64*x,64,64),e.endFill()},zIndex:x+.5}),s&&j&&(0,a.jsx)(tF.jy,{texture:tW(s.imageUrl),anchor:{x:.5,y:1},x:(m+(s.width||1)/2)*64,y:(x+(s.height||1))*64,width:64*(s.width||1),height:64*(s.height||1),zIndex:x+(s.height||1)}),n&&p&&(0,a.jsx)(tF.TC,{draw:e=>{var t,s,a,n;e.clear(),e.lineStyle(4,16498468,1);let r=null!==(a=null===(t=p.rootTile)||void 0===t?void 0:t.x)&&void 0!==a?a:m,l=null!==(n=null===(s=p.rootTile)||void 0===s?void 0:s.y)&&void 0!==n?n:x;e.drawRect(64*r,64*l,64*v,64*y)},zIndex:x+y+1})]})},tH=e=>{let{keysPressed:t,onCameraChange:s}=e;return(0,tF.m9)(e=>{!t||Object.values(t).every(e=>!e)||s(s=>{let a=0,n=0,r=8*e/s.zoom;return((t.w||t.arrowup)&&(n+=r),(t.s||t.arrowdown)&&(n-=r),(t.a||t.arrowleft)&&(a+=r),(t.d||t.arrowright)&&(a-=r),0!==a||0!==n)?{...s,x:s.x+a,y:s.y+n}:s})}),null};function tK(e){let{gridData:t,camera:s,onCameraChange:r,onTileInteract:l,onRightClick:i,selectedTool:o,selectedTiles:d,groupTileKeys:c,bonusSourceTileKey:u,bonusRadiusTiles:m,itemsById:x,isRaining:h,waterAdjacentTileKeys:p,playerStats:f,nextCosts:g,keysPressed:b}=e,j=(0,n.useRef)(null),v=(0,n.useRef)(null),[y,w]=(0,n.useState)(!1),[N,S]=(0,n.useState)([]),[k,C]=(0,n.useState)(null),T=(0,n.useRef)(!1),_=(0,n.useRef)(null),z=(0,n.useRef)(null),I=(0,n.useRef)({}).current,M="paint"===o.tool?x[o.paintId]:null,R=(0,n.useMemo)(()=>tY("/tilesets/dirt.png"),[]),E=(0,n.useMemo)(()=>tY("/tilesets/grass.png"),[]),P=(0,n.useMemo)(()=>tY("/tilesets/stone.png"),[]),D=(0,n.useCallback)(e=>{if(!M||!e)return!1;let{x:s,y:a}=e,n=g[M.id]||M.cost;if(f.seeds<n)return!0;let r=M.width||1,l=M.height||1;for(let e=0;e<l;e++)for(let n=0;n<r;n++){let r=t["".concat(s+n,",").concat(a+e)];if(!r||r.item||!M.placeableOn.includes(r.type))return!0}return!1},[M,t,f.seeds,g]);(0,n.useEffect)(()=>{var e,t;let s=null===(t=j.current)||void 0===t?void 0:null===(e=t.app)||void 0===e?void 0:e.view,a=e=>{!tG(e)&&v.current&&(e.preventDefault(),r(t=>{let s=t.zoom,a=Math.max(.4,Math.min(e.deltaY<0?1.1*s:s/1.1,3)),n=window.innerWidth/2,r=window.innerHeight/2,l=(n-t.x)/t.zoom,i=(r-t.y)/t.zoom;return{x:n-l*a,y:r-i*a,zoom:a}}))};if(s)return s.addEventListener("wheel",a,{passive:!1}),()=>{s.removeEventListener("wheel",a)}},[j.current,r]),(0,n.useEffect)(()=>{let e=e=>{tG(e)||" "!==e.key||(e.preventDefault(),w(!0))},t=e=>{" "===e.key&&(e.preventDefault(),w(!1))};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]);let F=e=>({x:Math.floor(e.x/64),y:Math.floor(e.y/64)}),U=(0,n.useCallback)(e=>{if(tG(e.nativeEvent)){C(null);return}I[e.pointerId]&&(I[e.pointerId]=e.global.clone());let t=F(e.getLocalPosition(v.current));if(C(t),Object.keys(I).length>=2&&_.current&&z.current){let t=Object.values(I);if(t.length<2)return;let s=t[0],a=t[1],n=new tU.E9j((s.x+a.x)/2,(s.y+a.y)/2),l=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));r(t=>{if(!_.current||null===z.current)return t;let s=n.x-_.current.x,a=n.y-_.current.y,r=t.zoom,i=Math.max(.4,Math.min(l/z.current*r,3)),o=e.getLocalPosition(v.current.parent);return{x:o.x-(o.x-(t.x+s))*(i/r),y:o.y-(o.y-(t.y+a))*(i/r),zoom:i}}),_.current=n.clone(),z.current=l}else T.current&&_.current?r(t=>{if(!_.current)return t;let s=e.global.x-_.current.x,a=e.global.y-_.current.y;return _.current={x:e.global.x,y:e.global.y},{...t,x:t.x+s,y:t.y+a}}):1===e.buttons&&l(t.x,t.y,!1,e.global.x,e.global.y)},[r,l,I]),A=e=>{let t=tG(e.nativeEvent),s=I[e.pointerId],a=0;s&&(a=Math.sqrt(Math.pow(e.global.x-s.x,2)+Math.pow(e.global.y-s.y,2))),delete I[e.pointerId];let n=Object.keys(I).length;if(n<1&&!t){if(2===e.button)i();else if(0===e.button&&!T.current&&a<10){let{x:t,y:s}=F(e.getLocalPosition(v.current));l(t,s,!0,e.global.x,e.global.y)}}if(n<2&&(z.current=null),n<1)T.current=!1,_.current=null;else{let e=Object.values(I);if(1===e.length)_.current={x:e[0].x,y:e[0].y};else if(e.length>=2){_.current={x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2};let t=e[0].x-e[1].x,s=e[0].y-e[1].y;z.current=Math.sqrt(t*t+s*s)}}};(0,n.useEffect)(()=>{if(!t){S([]);return}let{innerWidth:e,innerHeight:a}=window,n=Math.floor(-s.x/s.zoom/64-1),r=Math.floor(-s.y/s.zoom/64-1),l=n+Math.ceil(e/s.zoom/64)+2,i=r+Math.ceil(a/s.zoom/64)+2,o=[];for(let e=r;e<i;e++)for(let s=n;s<l;s++){let a="".concat(s,",").concat(e);t&&t[a]&&o.push(a)}S(o)},[s,t]);let O=(0,n.useMemo)(()=>new Set(d.map(e=>"".concat(e.x,",").concat(e.y))),[d]),B=M&&k;return(0,a.jsx)("div",{id:"game-canvas-container",className:"w-full h-full",style:{cursor:(()=>{if(T.current)return"grabbing";if(y||"pan"===o.tool)return"grab";switch(o.tool){case"paint":case"erase":return"crosshair";case"sample":return"pointer";default:return"default"}})()},children:(0,a.jsxs)(tF.Hf,{ref:j,width:window.innerWidth,height:window.innerHeight,options:{backgroundColor:3033643,antialias:!0,autoDensity:!0,resolution:window.devicePixelRatio,eventMode:"static"},onContextMenu:e=>e.preventDefault(),children:[(0,a.jsx)(tH,{onCameraChange:r,keysPressed:b}),(0,a.jsxs)(tF.W2,{ref:v,x:s.x,y:s.y,scale:s.zoom,sortableChildren:!0,eventMode:"static",onpointerdown:e=>{if(tG(e.nativeEvent))return;I[e.pointerId]=e.global.clone();let t=Object.keys(I).length,s="pan"===o.tool,a=1===e.button||2===e.button,n=0===e.button&&(y||"pan"===o.tool);if(1===t&&(s||a||n))T.current=!0,_.current={x:e.global.x,y:e.global.y};else if(t>=2){T.current=!0;let e=Object.values(I),t=e[0].x-e[1].x,s=e[0].y-e[1].y;z.current=Math.sqrt(t*t+s*s),_.current={x:(e[0].x+e[1].x)/2,y:(e[0].y+e[1].y)/2}}else T.current=!1},onpointermove:U,onpointerup:A,onpointerupoutside:A,onpointerleave:e=>{delete I[e.pointerId],C(null),0===Object.keys(I).length&&(T.current=!1,_.current=null,z.current=null)},children:[N.map(e=>{var s;let n=t[e];if(!n)return null;let r=n.item?x[n.item.id]:null,l=(null===(s=n.item)||void 0===s?void 0:s.rootTile)?"".concat(n.item.rootTile.x,",").concat(n.item.rootTile.y):e;return(0,a.jsx)(tq,{tile:n,itemInfo:r,isSelected:O.has(l),isInGroup:c.has(e),isSourceOfBonus:u===e,isInBonusRadius:m.has(e),isWaterAdjacent:p.has(e),dirtAutotileTextures:R,grassAutotileTextures:E,stoneAutotileTextures:P},e)}),B&&(0,a.jsx)(tB,{itemToPreview:M,coords:k,isBlocked:D(k)})]})]})})}let tQ=eH.fC;eH.xz;let tJ=eH.h_;eH.x8;let tX=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eH.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});tX.displayName=eH.aV.displayName;let t$=n.forwardRef((e,t)=>{let{className:s,children:n,hideCloseButton:r,...l}=e;return(0,a.jsxs)(tJ,{children:[(0,a.jsx)(tX,{}),(0,a.jsxs)(eH.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[n,!r&&(0,a.jsxs)(eH.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});t$.displayName=eH.VY.displayName;let t0=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};t0.displayName="DialogHeader";let t1=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};t1.displayName="DialogFooter";let t2=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eH.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});t2.displayName=eH.Dx.displayName;let t4=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(eH.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})});t4.displayName=eH.dk.displayName;let t5=[{id:"man",url:"/items/avatar_man.png"},{id:"woman",url:"/items/avatar_woman.png"}];function t6(e){let{onStartGame:t}=e,[s,r]=(0,n.useState)(ti[Math.floor(Math.random()*ti.length)]),[l,o]=(0,n.useState)(t5[0].url),c=e=>{e.preventDefault()};return(0,a.jsx)(tQ,{open:!0,children:(0,a.jsxs)(t$,{className:"max-w-[480px] max-h-[100%] bg-background/90 backdrop-blur-sm border-primary/50 overflow-y-scroll","data-no-grid-interaction":"true",onEscapeKeyDown:c,onPointerDownOutside:c,hideCloseButton:!0,children:[(0,a.jsxs)(t0,{children:[(0,a.jsx)(t2,{className:"text-center text-4xl font-headline text-primary",children:"Welcome to Seeds Valley Idle!"}),(0,a.jsx)(t4,{className:"text-center text-lg text-foreground/80 pt-2",children:"Begin your journey and cultivate a world of your own."})]}),(0,a.jsxs)("div",{className:"space-y-4 my-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(tr,{htmlFor:"avatar",className:"font-bold text-xl text-primary",children:"Choose Your Avatar"}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-4 mt-2",children:t5.map(e=>(0,a.jsx)("button",{onClick:()=>o(e.url),className:(0,i.cn)("w-20 h-20 rounded-full border-4 transition-all bg-[#D7C951]",l===e.url?"border-white":"border-transparent hover:border-primary/50"),children:(0,a.jsx)(f.default,{src:e.url,alt:"avatar ".concat(e.id),width:80,height:80,unoptimized:!0})},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(tr,{htmlFor:"worldName",className:"font-bold text-xl text-primary",children:"Name Your World"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(tl,{id:"worldName",value:s,onChange:e=>r(e.target.value),onKeyDown:e=>e.stopPropagation(),className:"text-lg",maxLength:50}),(0,a.jsxs)(d,{variant:"outline",size:"icon",onClick:()=>{r(ti[Math.floor(Math.random()*ti.length)])},children:[(0,a.jsx)(e8.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Randomize Name"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-xl text-primary mb-2",children:"How to Play"}),(0,a.jsxs)("ul",{className:"list-disc pl-5 space-y-2 text-base text-foreground/90 bg-secondary/30 p-4 rounded-lg border border-border/50",children:[(0,a.jsxs)("li",{children:["Click the large ",(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:16,height:16,className:"inline-block -mt-1",unoptimized:!0})," button to manually gather Seeds."]}),(0,a.jsx)("li",{children:"Use Seeds to buy items from the shop on the left."}),(0,a.jsx)("li",{children:"Items like flowers and trees will generate Seeds for you automatically."}),(0,a.jsx)("li",{children:"Group items together and use buildings to create powerful production synergies."}),(0,a.jsxs)("li",{children:["Pan around with ",(0,a.jsx)("span",{className:"font-bold",children:"WASD"})," or by holding ",(0,a.jsx)("span",{className:"font-bold",children:"Spacebar + Drag"}),"."]}),(0,a.jsxs)("li",{children:["Click the ",(0,a.jsx)("span",{className:"font-bold",children:"Home"})," button to return to your starting house. It will update if you change the house position."]})]})]})]}),(0,a.jsx)(t1,{className:"mt-4",children:(0,a.jsx)(d,{onClick:()=>{s.trim()&&t(s.trim(),l)},className:"w-full text-lg py-6",disabled:!s.trim(),children:"Start Growing"})})]})})}function t3(e){let{mission:t}=e;return(0,a.jsxs)("div",{className:"w-[350px] min-h-[60px] overflow-hidden relative border-2 border-green-400/30 backdrop-blur-md rounded-lg px-4 py-2 flex items-center gap-4","data-no-grid-interaction":"true",children:[(0,a.jsx)("div",{className:"absolute inset-0 z-0",style:{backgroundImage:"url('/items/floor_".concat(t.background,".png')"),backgroundSize:"cover"}}),(0,a.jsx)("div",{className:"absolute inset-0 z-0 bg-black/20"}),(0,a.jsxs)("div",{className:"relative z-10 flex-grow",children:[(0,a.jsx)("p",{className:"text-white/80 text-sm font-bold leading-tight",children:"Mission Complete!"}),(0,a.jsx)("p",{className:"text-white font-semibold text-base leading-tight",children:t.name}),(0,a.jsxs)("p",{className:"text-white text-sm mt-1 flex items-center gap-1",children:["+",(0,i.u)(t.reward)," seeds"]})]})]})}let t8=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function t9(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:(0,i.cn)(t8({variant:s}),t),...n})}let t7=e=>{if(!e.bonus)return null;if("production"===e.bonus.type){let t=e.bonus.appliesTo.map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(", ");return"+".concat(100*e.bonus.value,"% production to ").concat(t," within ").concat(e.bonus.radius," tiles.")}return"radiusIncrease"===e.bonus.type?"+".concat(e.bonus.value," radius to Buildings within ").concat(e.bonus.radius," tiles."):null};function se(e){let{item:t,nextCost:s,onClose:n}=e,r=t.placeableOn[0]||"grass",l=t7(t);return(0,a.jsx)(tQ,{open:!0,onOpenChange:n,children:(0,a.jsx)(t$,{className:"w-[300px] md:w-[420px] border-primary/50 text-center p-0 overflow-hidden","data-no-grid-interaction":"true",onEscapeKeyDown:n,hideCloseButton:!0,style:{backgroundImage:"url('/items/floor_".concat(r,".png')"),backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"relative z-10 p-6 pt-8 bg-black/40 backdrop-blur-sm flex flex-col",children:[(0,a.jsx)(t0,{children:(0,a.jsx)(t2,{className:"text-center text-3xl font-headline text-primary",children:"Item Unlocked!"})}),(0,a.jsx)("div",{className:"w-full h-48 my-4 relative flex items-center justify-center",children:(0,a.jsx)(f.default,{src:t.imageUrl,alt:t.name,width:128,height:128,className:"object-contain drop-shadow-lg z-10",unoptimized:!0})}),(0,a.jsxs)("div",{className:"space-y-3 text-lg",children:[(0,a.jsx)("h3",{className:"text-4xl font-bold font-headline text-white",children:t.name}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(t9,{variant:"outline",className:"capitalize text-base border-border bg-secondary/30 text-white",children:t.category})}),(0,a.jsxs)("div",{className:"flex justify-around items-center pt-4",children:[t.seedsPerSecond>0&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Production"}),(0,a.jsxs)("p",{className:"font-bold text-2xl text-green-400 flex items-center gap-1",children:[(0,i.u)(t.seedsPerSecond),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:16,height:16,unoptimized:!0}),"/s"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Cost"}),(0,a.jsxs)("p",{className:"font-bold text-2xl flex items-center gap-1 text-white",children:[(0,i.u)(s),(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:16,height:16,unoptimized:!0})]})]})]}),l&&(0,a.jsxs)("div",{className:"text-center pt-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Bonus"}),(0,a.jsx)("p",{className:"font-semibold text-lg text-yellow-300",children:l})]})]}),(0,a.jsx)(t1,{className:"mt-6",children:(0,a.jsx)(d,{onClick:n,className:"w-full text-lg py-6",children:"Continue"})})]})})})}function st(e){let{isOpen:t,onOpenChange:s,availableUpgrades:n,onPurchaseUpgrade:r,playerSeeds:l}=e,o=e=>{r(e.itemId,e.upgradeType)};return(0,a.jsx)(eK,{open:t,onOpenChange:s,children:(0,a.jsxs)(e$,{side:"bottom",className:"h-[80vh] bg-background/95 backdrop-blur-sm flex flex-col p-0","data-no-grid-interaction":"true",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,a.jsxs)(e0,{className:"p-4 pb-2 text-left border-b border-border/50",children:[(0,a.jsxs)(e2,{className:"text-2xl",children:["Available Upgrades (",n.length,")"]}),(0,a.jsx)(e4,{children:"Purchase permanent upgrades to boost your production."})]}),(0,a.jsx)(e6,{className:"flex-grow",children:(0,a.jsx)("div",{className:"space-y-3 p-4",children:n.map((e,t)=>{var s;let n=l>=e.cost;return(0,a.jsx)(K,{className:"p-3 bg-secondary/30 border-border/50",children:(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"w-20 h-20 rounded-md flex-shrink-0 relative flex items-center justify-center p-1",style:{backgroundImage:"url('/items/floor_".concat((null===(s=e.placeableOn)||void 0===s?void 0:s[0])||"grass",".png')"),backgroundSize:"cover"},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 rounded-md"}),e.imageUrl?(0,a.jsx)(f.default,{src:e.imageUrl,alt:e.name,width:64,height:64,className:"object-contain drop-shadow-lg z-10",unoptimized:!0}):(0,a.jsx)("span",{className:"text-4xl z-10",children:e.emoji}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 bg-background text-primary text-sm font-bold w-7 h-7 flex items-center justify-center rounded-full border-2 border-primary z-20",children:e.nextLevel})]}),(0,a.jsxs)("div",{className:"flex-grow flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-lg leading-tight",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 font-bold text-lg text-green-400",children:[(0,a.jsx)(f.default,{src:"/items/icon_seed.png",alt:"Seed",width:16,height:16,unoptimized:!0}),(0,a.jsx)("span",{children:(0,i.u)(e.cost)})]}),(0,a.jsx)(d,{size:"sm",onClick:()=>o(e),disabled:!n,children:"Buy"})]})]})]})},"".concat(e.itemId,"-").concat(t))})})})]})})}var ss=s(267),sa=s(6630);let sn={Forest:"/items/icon-forest.png",Garden:"/items/icon-garden.png",Plantation:"/items/icon-plantation.png"};function sr(e){let{isOpen:t,onOpenChange:s,itemStats:n,categoryStats:r}=e,l=Object.values(n).filter(e=>e.count>0&&e.sps>0).sort((e,t)=>t.sps-e.sps),o=Object.values(r).filter(e=>e&&e.count>0&&e.sps>0).sort((e,t)=>t.sps-e.sps),d=o.filter(e=>e&&(e.groupCount||0)>0).sort((e,t)=>(t.groupSps||0)-(e.groupSps||0));return(0,a.jsx)(eK,{open:t,onOpenChange:s,children:(0,a.jsxs)(e$,{side:"bottom",className:"h-[80vh] bg-background/95 backdrop-blur-sm flex flex-col p-0","data-no-grid-interaction":"true",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,a.jsxs)(e0,{className:"p-4 pb-2 text-left border-b border-border/50",children:[(0,a.jsx)(e2,{className:"text-2xl",children:"Economy Stats"}),(0,a.jsx)(e4,{children:"A breakdown of your Seeds per Second (SPS) production."})]}),(0,a.jsx)(e6,{className:"flex-grow",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)(L,{defaultValue:"categories",className:"w-full",children:[(0,a.jsxs)(G,{className:"grid w-full grid-cols-2 h-10",children:[(0,a.jsx)(V,{value:"categories",children:"Categories"}),(0,a.jsx)(V,{value:"items",children:"Items"})]}),(0,a.jsxs)(Z,{value:"categories",className:"space-y-3 text-lg leading-tight mt-4",children:[o.map(e=>e?(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[e.firstItem&&e.firstItem.imageUrl?(0,a.jsx)(f.default,{src:e.firstItem.imageUrl,alt:e.name,width:24,height:24,unoptimized:!0}):(0,a.jsx)("span",{children:e.icon}),(0,a.jsxs)("span",{className:"truncate",children:[e.name," x",e.count]})]}),(0,a.jsxs)("span",{className:"font-bold",children:["+ ",(0,i.u)(e.sps),"/s"]})]},e.name):null),d.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q,{className:"my-2 bg-border/50"}),d.map(e=>{if(!e)return null;let t=Object.keys(r).find(t=>{var s;return(null===(s=r[t])||void 0===s?void 0:s.name)===e.name});if(!t)return null;let s=g.LQ[t];if(!s)return null;let n=sn[s.name]||"\uD83C\uDF33";return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[n.startsWith("/")?(0,a.jsx)(f.default,{src:n,alt:s.name,width:24,height:24,unoptimized:!0}):(0,a.jsx)("span",{children:n}),(0,a.jsxs)("span",{className:"truncate",children:[s.name," x",e.groupCount]})]}),(0,a.jsxs)("span",{className:"font-bold",children:["+ ",(0,i.u)(e.groupSps||0),"/s"]})]},"".concat(e.name,"-group"))})]})]}),(0,a.jsx)(Z,{value:"items",className:"space-y-3 text-lg leading-tight mt-4",children:l.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 truncate",children:[e.item.imageUrl?(0,a.jsx)(f.default,{src:e.item.imageUrl,alt:e.item.name,width:24,height:24,unoptimized:!0}):(0,a.jsx)("span",{children:e.item.emoji}),(0,a.jsxs)("span",{className:"truncate",children:[e.item.name," x",e.count]})]}),(0,a.jsxs)("span",{className:"font-bold",children:["+ ",(0,i.u)(e.sps),"/s"]})]},e.item.id))})]})})})]})})}function sl(e){let{isOpen:t,onOpenChange:s}=e;return(0,a.jsx)(eK,{open:t,onOpenChange:s,children:(0,a.jsxs)(e$,{side:"bottom",className:"h-[80vh] bg-background/95 backdrop-blur-sm flex flex-col p-0","data-no-grid-interaction":"true",onOpenAutoFocus:e=>e.preventDefault(),children:[(0,a.jsxs)(e0,{className:"p-4 pb-2 text-left border-b border-border/50",children:[(0,a.jsx)(e2,{className:"text-2xl",children:"Missions"}),(0,a.jsx)(e4,{children:"Complete goals to earn one-time seed rewards."})]}),(0,a.jsx)(e6,{className:"flex-grow",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(X,{})})})]})})}let si=e=>{let t=e.target;for(;t;){var s;if(null===(s=t.dataset)||void 0===s?void 0:s.noGridInteraction)return!0;if("game-canvas-container"===t.id||"CANVAS"===t.tagName)break;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"BUTTON"===t.tagName)return!0;t=t.parentElement}return!1};function so(e){var t;let{initialItems:r}=e,{toast:l}=(0,W.pm)(),{playerStats:o,setPlayerStats:c,setTotalSeedsPerSecond:u,totalSeedsPerSecond:m,nextCosts:x,setNextCosts:h,setMissionProgress:p,missionProgress:j}=(0,b.g)(),[v,y]=(0,n.useState)({tool:"pan",brush:"single",paintId:"daisy"}),[w,N]=(0,n.useState)({x:0,y:0,zoom:1}),[S,k]=(0,n.useState)([]),[C,T]=(0,n.useState)(!1),[z,I]=(0,n.useState)(!1),[M,R]=(0,n.useState)(!1),[P,D]=(0,n.useState)(!1),[F,U]=(0,n.useState)(!1),[A,O]=(0,n.useState)(!1),[B,L]=(0,n.useState)(!1),[G,V]=(0,n.useState)(!1),[Z,Y]=(0,n.useState)(!1),[q,H]=(0,n.useState)([]),[K,Q]=(0,n.useState)([]),[J,X]=(0,n.useState)(!0),[$,et]=(0,n.useState)(!0),[es,ea]=(0,n.useState)({}),[en,er]=(0,n.useState)(!1),el=(0,n.useRef)(null),ei=(0,n.useRef)(0);(0,n.useEffect)(()=>{document.title="".concat((0,i.u)(o.seeds)," \uD83C\uDF31 - ").concat(o.worldName)},[o.seeds,o.worldName]),(0,n.useEffect)(()=>{let e=localStorage.getItem("arborea-sound-enabled");null!==e&&X("true"===e);let t=localStorage.getItem("arborea-shortcuts-enabled");null!==t&&et("true"===t)},[]);let eo=(0,n.useCallback)(()=>{if(!J)return;let e=new Audio("/sounds/place_item.mp3");e.volume=.3,e.play().catch(e=>{})},[J]),ed=(0,n.useCallback)(e=>{e.playerStats&&c(e.playerStats),void 0!==e.totalSeedsPerSecond&&u(e.totalSeedsPerSecond),e.missionProgress&&p(e.missionProgress),e.nextCosts&&h(e.nextCosts),I(!1)},[c,u,p,h]),ec=(0,n.useCallback)(()=>{I(!0)},[]),eu=(0,n.useCallback)(e=>{l(e)},[l]),em=(0,n.useCallback)(e=>{l({component:(0,a.jsx)(tm,{level:e.newLevel,reward:e.rewardSeeds})})},[l]),ex=(0,n.useCallback)(e=>{l({component:(0,a.jsx)(tx,{achievement:e})})},[l]),eh=(0,n.useCallback)(e=>{l({component:(0,a.jsx)(t3,{mission:e})})},[l]),ep=(0,n.useCallback)(e=>{H(t=>[...t,e])},[]),ef=(0,n.useCallback)(e=>{let t=e||o.homePosition;if(!t)return;let s=r.find(e=>"home_base"===e.id),a=(null==s?void 0:s.width)||1,n=(null==s?void 0:s.height)||1,l=(t.x+a/2)*64,i=(t.y+n/2)*64;N(e=>{let t=window.innerWidth/2-l*e.zoom,s=window.innerHeight/2-i*e.zoom;return{...e,x:t,y:s}})},[r,o.homePosition]),eg=(0,n.useCallback)(e=>{var t;e.isNewWorld?er(!0):(null===(t=e.playerStats)||void 0===t?void 0:t.homePosition)&&ef(e.playerStats.homePosition)},[ef]),{isGameInitialized:eb,gridData:ej,worldSeed:ev,itemStats:ey,unlockedItems:ew,categoryStats:eN,allGroupTileKeys:eS,bonusesByTile:ek,availableUpgrades:eC,isRaining:ez,rawGameState:eM,calculatedItems:eR,bonusSourceTileKeys:eB,bonusRadiusTiles:eG,activeTooltip:eV,waterAdjacentTileKeys:eZ,postMessage:eW,resetGame:eY}=function(e,t){let a=(0,n.useRef)(),r=(0,n.useRef)(),[l,i]=(0,n.useState)(!1),[o,d]=(0,n.useState)([]),[c,u]=(0,n.useState)([]),[m,x]=(0,n.useState)(null),[h,p]=(0,n.useState)(0),[f,g]=(0,n.useState)({}),[b,j]=(0,n.useState)({}),[v,y]=(0,n.useState)(new Set),[w,N]=(0,n.useState)({}),[S,k]=(0,n.useState)([]),[C,T]=(0,n.useState)(),[_,z]=(0,n.useState)(new Set),[I,M]=(0,n.useState)(new Set),[R,E]=(0,n.useState)(null),[P,D]=(0,n.useState)(new Set),F=(0,n.useCallback)(e=>{var t;null===(t=r.current)||void 0===t||t.postMessage(e)},[]),U=(0,n.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.current&&a.current.terminate();let l=new Worker(s.tu(new URL(s.p+s.u(263),s.b)));a.current=l,r.current=tc.Ud(l);let o=e=>{let{type:s,payload:a}=e.data;switch(s){case"GAME_INITIALIZED":d(a.calculatedItems),u(a.unlockedItems),(async()=>{var e,s;let n=await (null===(e=r.current)||void 0===e?void 0:e.getInitialState());n&&(x(n.gridData),p(n.worldSeed),t.onStateUpdated({playerStats:n.playerStats}),null===(s=r.current)||void 0===s||s.forceFullStateUpdate()),i(!0),setTimeout(()=>t.onGameInitialized(a),0)})();break;case"STATE_UPDATED":var n;x(e=>a.gridData||e),a.worldSeed&&p(a.worldSeed),a.unlockedItems&&u(a.unlockedItems),g(e=>a.itemStats||e),j(e=>a.categoryStats||e),a.allGroupTileKeys&&y(new Set(a.allGroupTileKeys)),a.waterAdjacentTileKeys&&D(new Set(a.waterAdjacentTileKeys)),N(e=>a.bonusesByTile||e),k(e=>a.availableUpgrades||e),a.rawGameState&&T(a.rawGameState),z(e=>a.bonusRadiusTiles?new Set(a.bonusRadiusTiles):e),E(e=>void 0!==a.activeTooltip?a.activeTooltip:e),(null===(n=a.activeTooltip)||void 0===n?void 0:n.sourceBuildingKeys)?M(new Set(a.activeTooltip.sourceBuildingKeys)):null===a.activeTooltip&&M(new Set),t.onStateUpdated(a);break;case"CHUNK_GENERATION_STARTED":t.onChunkGenerationStarted();break;case"TOAST":t.onToast(a);break;case"LEVEL_UP":t.onLevelUp(a);break;case"ACHIEVEMENT_UNLOCKED":t.onAchievementUnlocked(a);break;case"MISSION_COMPLETED":t.onMissionCompleted(a);break;case"ITEM_UNLOCKED":t.onItemUnlocked(a);break;case"SAVE_STATE_TO_LS":try{localStorage.setItem(tu,a)}catch(e){console.error("Failed to save game state to localStorage from worker message",e)}break;case"WORKER_ERROR":console.error("[GameClient] Received error from worker:",a.error)}};return l.addEventListener("message",o),(async()=>{var t;let s=null,a={};if(n.isReset)localStorage.removeItem(tu),a={isReset:!0};else try{let e=localStorage.getItem(tu);e&&(s=JSON.parse(e))}catch(e){console.error("Failed to load game state from localStorage",e)}await (null===(t=r.current)||void 0===t?void 0:t.initialize(e,s,a))})(),()=>{l.removeEventListener("message",o),l.terminate()}},[]);(0,n.useEffect)(()=>{U()},[]);let A=(0,n.useCallback)(()=>{i(!1),x(null),U({isReset:!0})},[U]);return{isGameInitialized:l,calculatedItems:o,unlockedItems:c,gridData:m,worldSeed:h,itemStats:f,categoryStats:b,allGroupTileKeys:v,bonusesByTile:w,availableUpgrades:S,isRaining:(null==C?void 0:C.isRaining)||!1,rawGameState:C,bonusRadiusTiles:_,bonusSourceTileKeys:I,activeTooltip:R,waterAdjacentTileKeys:P,postMessage:F,resetGame:A}}(r,(0,n.useMemo)(()=>({onStateUpdated:ed,onChunkGenerationStarted:ec,onToast:eu,onLevelUp:em,onAchievementUnlocked:ex,onMissionCompleted:eh,onItemUnlocked:ep,onGameInitialized:eg}),[ed,ec,eu,em,ex,eh,ep,eg])),eH=(0,n.useMemo)(()=>eR?eR.reduce((e,t)=>(e[t.id]=t,e),{}):{},[eR]),eK=(0,n.useCallback)(()=>{k([]),eW({type:"SET_SELECTED_TILE",payload:null})},[eW]),eQ=(0,n.useCallback)(()=>{eK(),y({tool:"pan",brush:"single",paintId:""})},[eK]),eJ=()=>{0!==S.length&&T(!0)},eX=(0,n.useCallback)(()=>{"edit"===v.tool?(S.length>0&&eK(),y({tool:"pan",brush:"single",paintId:""})):"paint"===v.tool?y({tool:"pan",brush:"single",paintId:""}):"pan"===v.tool?y({tool:"edit",brush:"single",paintId:""}):S.length>0&&eK()},[v.tool,S.length,eK]);(0,n.useEffect)(()=>{let e=e=>{let t=e.key.toLowerCase();if($&&["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"].includes(t)){if(si(e))return;e.preventDefault(),ea(e=>({...e,[t]:!0}))}!si(e)&&("Escape"===e.key&&(e.preventDefault(),G?V(!1):"paint"===v.tool?y(e=>({...e,tool:"pan",paintId:""})):"edit"===v.tool?eQ():S.length>0||eV?eK():P?D(!1):M?R(!1):F?U(!1):A?O(!1):B&&L(!1)),"Enter"===e.key&&"edit"===v.tool&&(e.preventDefault(),eQ()),("Delete"===e.key||"Backspace"===e.key)&&S.length>0&&(e.preventDefault(),eJ()))},t=e=>{let t=e.key.toLowerCase();["w","a","s","d","arrowup","arrowdown","arrowleft","arrowright"].includes(t)&&(e.preventDefault(),ea(e=>({...e,[t]:!1})))};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[v,S.length,eV,M,P,F,A,B,G,eK,eW,$,eQ]),(0,n.useEffect)(()=>{if(!eb||z)return;let e=setTimeout(()=>{eW({type:"UPDATE_VISIBLE_CHUNKS",payload:{camera:w,viewWidth:window.innerWidth,viewHeight:window.innerHeight}})},300);return()=>clearTimeout(e)},[w,eb,eW,z]);let e$=(0,n.useMemo)(()=>o?function(e){var t;let s=(null===(t=e.globalLevels)||void 0===t?void 0:t.click)||1,a=g.SR.click.bonusValue;return s<=1?1:Math.floor(1*Math.pow(a,s-1))}(o):1,[o]),e0=e=>{eW({type:"ADD_SEEDS"});let t={id:Date.now()+Math.random(),value:"+".concat((0,i.u)(e$)),x:e.clientX+(Math.random()-.5)*60,y:e.clientY-20+(Math.random()-.5)*20};Q(e=>[...e,t])},e1=(e,t)=>{eW({type:"PURCHASE_".concat(t.toUpperCase(),"_UPGRADE"),payload:{["group"===t?"groupId":"global"===t?"upgradeId":"itemId"]:e}})},e2=(0,n.useCallback)(e=>{eW({type:"UPDATE_WORLD_NAME",payload:{worldName:e}})},[eW]),e4=(e,t)=>{eW({type:"UPDATE_WORLD_NAME",payload:{worldName:e,avatarUrl:t}}),er(!1)},e5=e=>{N(t=>{let s=Math.max(.4,Math.min(t.zoom*e,3)),a=window.innerWidth/2,n=window.innerHeight/2,r=(a-t.x)/t.zoom,l=(n-t.y)/t.zoom;return{x:a-r*s,y:n-l*s,zoom:s}})};if(!eb||!ej)return(0,a.jsx)("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:en?(0,a.jsx)(t6,{onStartGame:e4}):(0,a.jsx)("p",{className:"text-2xl",children:"Loading world..."})});let e6=e=>{Q(t=>t.filter(t=>t.id!==e))};return(0,a.jsxs)("div",{className:"h-full bg-background font-body text-2xl relative select-none",children:[(0,a.jsxs)("main",{className:"h-full w-full bg-background relative overflow-hidden",children:[en&&(0,a.jsx)(t6,{onStartGame:e4}),q.length>0&&(0,a.jsx)(se,{item:q[0],onClose:()=>{H(e=>e.slice(1))},nextCost:x[q[0].id]||q[0].cost}),K.map(e=>(0,a.jsx)(th,{...e,onAnimationEnd:()=>e6(e.id)},e.id)),(0,a.jsx)(tK,{gridData:ej,camera:w,onCameraChange:N,onTileInteract:(e,t,s,a,n)=>{var r,d,c;let u="".concat(e,",").concat(t),m=null==ej?void 0:ej[u];if("paint"===v.tool||"erase"===v.tool){let e=Date.now();if(e-ei.current<50)return;ei.current=e}if(!s&&(null===(r=el.current)||void 0===r?void 0:r.x)===e&&(null===(d=el.current)||void 0===d?void 0:d.y)===t)return;(s||"paint"===v.tool)&&(el.current={x:e,y:t});let h=e=>{let t={id:Date.now()+Math.random(),value:e,x:a+(Math.random()-.5)*60,y:n-20+(Math.random()-.5)*20};Q(e=>[...e,t])};if("paint"===v.tool){let a=eH[v.paintId];if(!a)return;let n=x[a.id]||a.cost;if(o.seeds<n){s&&h("Not enough seeds");return}let r=a.width||1,l=a.height||1;for(let n=0;n<l;n++)for(let l=0;l<r;l++){let r="".concat(e+l,",").concat(t+n),i=null==ej?void 0:ej[r];if(!i||!a.placeableOn.includes(i.type)){s&&h("Needs ".concat(a.placeableOn.join(" or ")));return}if(i.item){s&&h("Occupied");return}}h("-".concat((0,i.u)(n))),eo(),eW({type:"PLACE_ITEM",payload:{x:e,y:t,item:a}});return}if("erase"===v.tool){if(!(null==m?void 0:m.item))return;let s=e,a=t;m.item.rootTile&&(s=m.item.rootTile.x,a=m.item.rootTile.y);let n=eH[ej["".concat(s,",").concat(a)].item.id];eW({type:"REMOVE_ITEM",payload:{x:s,y:a,item:n}});return}if("sample"===v.tool&&s){(null==m?void 0:m.item)&&(y(e=>({...e,tool:"paint",paintId:m.item.id})),l({description:"Sampled ".concat(eH[m.item.id].name),duration:3e3}));return}if("edit"===v.tool){if(s){if(null==m?void 0:m.item){let e,t=m;m.item.rootTile&&(t=ej["".concat(m.item.rootTile.x,",").concat(m.item.rootTile.y)]);let s=S.findIndex(e=>e.x===t.x&&e.y===t.y);k(e=s>-1?S.filter((e,t)=>t!==s):[...S,t]),eW({type:"SET_SELECTED_TILE",payload:e.length>0?{x:e[0].x,y:e[0].y}:null})}else if(S.length>0){let s=S[0],a=eH[s.item.id];eW({type:"MOVE_ITEM",payload:{from:{x:s.x,y:s.y},to:{x:e,y:t},item:a}});let n=S.slice(1);k(n),eW({type:"SET_SELECTED_TILE",payload:n.length>0?{x:n[0].x,y:n[0].y}:null})}else eK()}}else if(s){if(eV)eW({type:"SET_ACTIVE_TOOLTIP_TILE",payload:null});else{let e=m;if((null==e?void 0:null===(c=e.item)||void 0===c?void 0:c.rootTile)&&(e=ej["".concat(e.item.rootTile.x,",").concat(e.item.rootTile.y)]),null==e?void 0:e.item){let t=eH[e.item.id];t&&"decoration"!==t.category&&"road"!==t.category&&eW({type:"GET_GROUP",payload:{x:e.x,y:e.y}})}}}},onRightClick:eX,selectedTool:v,selectedTiles:S,groupTileKeys:eS,bonusSourceTileKey:eB.size>0?Array.from(eB)[0]:null,bonusRadiusTiles:eG,itemsById:eH,isRaining:ez,waterAdjacentTileKeys:eZ,playerStats:o,nextCosts:x,keysPressed:es}),(0,a.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(74.36deg, rgba(88, 77, 31, 0.6) 0%, rgba(205, 186, 67, 0.6) 100%)",backgroundBlendMode:"soft-light",mixBlendMode:"soft-light"}}),(0,a.jsxs)("div",{className:(0,i.cn)("transition-opacity duration-300",G?"opacity-0 pointer-events-none":"opacity-100"),children:[z&&(0,a.jsxs)("div",{"data-no-grid-interaction":"true",className:"fixed top-4 left-1/2 -translate-x-1/2 z-30 bg-background/80 text-foreground px-4 py-2 rounded-lg flex items-center gap-2 animate-in fade-in",children:[(0,a.jsx)(eT.spinner,{className:"w-5 h-5 animate-spin"}),(0,a.jsx)("span",{className:"text-lg",children:"Generating new territory..."})]}),(0,a.jsxs)("div",{className:"pointer-events-auto",children:[(0,a.jsx)("div",{className:(0,i.cn)("transition-opacity","edit"===v.tool&&"md:opacity-100 opacity-0 md:block"),children:(0,a.jsx)(E,{items:eR,unlockedItems:ew,itemStats:ey,selectedTool:v,onToolSelect:y,onManualSeedGather:e0})}),(0,a.jsxs)("div",{"data-no-grid-interaction":"true",className:"fixed bottom-[240px] left-4 z-20 flex flex-col gap-2 md:hidden",children:[(0,a.jsx)(d,{size:"icon",className:"rounded-2xl w-12 h-12 bg-white/60 ring-2 ring-white p-0 backdrop-blur-sm",onClick:()=>e5(1.2),children:(0,a.jsx)(ss.Z,{className:"w-5 h-5"})}),(0,a.jsx)(d,{size:"icon",className:"rounded-2xl w-12 h-12 bg-white/60 ring-2 ring-white p-0 backdrop-blur-sm",onClick:()=>e5(1/1.2),children:(0,a.jsx)(sa.Z,{className:"w-5 h-5"})})]}),"edit"===v.tool&&(0,a.jsx)(e_,{selectedCount:S.length,onFinish:eQ,onDelete:eJ}),(0,a.jsx)(eq,{onAvatarClick:()=>R(!0),onGoHome:()=>ef(),onScreenshotClick:()=>{V(e=>{let t=!e;return t?(Y(!0),setTimeout(()=>Y(!1),5e3)):Y(!1),t})},onWikiClick:()=>D(!0)}),(0,a.jsx)("div",{className:"fixed bottom-4 right-4 flex-col items-end gap-2 z-10 w-[230px] hidden md:flex",children:(0,a.jsx)(ee,{itemStats:ey,categoryStats:eN,availableUpgrades:eC,onPurchaseUpgrade:e1})}),(0,a.jsxs)("div",{"data-no-grid-interaction":"true",className:(0,i.cn)("fixed bottom-[240px] right-4 z-20 flex flex-col gap-2 md:hidden","edit"===v.tool&&"opacity-0 pointer-events-none"),children:[eC.length>0&&(0,a.jsxs)(d,{size:"icon",onClick:()=>U(!0),className:"rounded-2xl w-12 h-12 bg-white/60 ring-2 ring-white p-0 backdrop-blur-sm animate-pulse-slow",children:[(0,a.jsx)(f.default,{src:"/items/icon_upgrades.png",alt:"Upgrades",width:28,height:28,unoptimized:!0}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 bg-destructive text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full border-2 border-background",children:eC.length})]}),(0,a.jsx)(d,{onClick:()=>O(!0),className:"rounded-2xl w-12 h-12 bg-white/60 ring-2 ring-white p-0 backdrop-blur-sm",children:(0,a.jsx)(f.default,{src:"/items/icon_stats.png",alt:"Stats",width:28,height:28,className:"object-contain",unoptimized:!0})}),(0,a.jsx)(d,{onClick:()=>L(!0),className:"rounded-2xl w-12 h-12 bg-white/60 ring-2 ring-white p-0 backdrop-blur-sm",children:(0,a.jsx)(f.default,{src:"/items/icon_missions.png",alt:"Missions",width:28,height:28,className:"object-contain",unoptimized:!0})})]}),(0,a.jsx)("div",{className:(0,i.cn)("fixed bottom-4 left-1/2 -translate-x-1/2 z-20 hidden md:block","edit"===v.tool&&"opacity-0 pointer-events-none"),children:(0,a.jsx)(_,{onClick:e0})})]})]}),eV&&ek&&o&&(0,a.jsx)(eL,{camera:w,tooltipData:eV,itemInfo:eH[eV.tile.item.id],itemLevel:(null===(t=o.itemLevels)||void 0===t?void 0:t[eV.tile.item.id])||1}),(0,a.jsx)(td,{isOpen:M,onOpenChange:R,onReset:()=>{eY(),R(!1)},worldSeed:ev,gridData:ej,rawGameState:eM,isSoundEnabled:J,onToggleSound:()=>{X(e=>{let t=!e;if(localStorage.setItem("arborea-sound-enabled",String(t)),t){let e=new Audio("/sounds/place_item.mp3");e.volume=0,e.play().catch(()=>{})}return t})},isShortcutsEnabled:$,onToggleShortcuts:()=>{et(e=>{let t=!e;return localStorage.setItem("arborea-shortcuts-enabled",String(t)),t||ea({}),t})},onWorldNameChange:e2,onWikiClick:()=>D(!0)}),(0,a.jsx)(tD,{isOpen:P,onOpenChange:D,items:eR}),(0,a.jsx)(st,{isOpen:F,onOpenChange:U,availableUpgrades:eC,onPurchaseUpgrade:e1,playerSeeds:o.seeds}),(0,a.jsx)(sr,{isOpen:A,onOpenChange:O,itemStats:ey,categoryStats:eN}),(0,a.jsx)(sl,{isOpen:B,onOpenChange:L})]}),(0,a.jsx)(eI,{open:C,onOpenChange:T,children:(0,a.jsxs)(eE,{children:[(0,a.jsxs)(eP,{children:[(0,a.jsx)(eF,{children:"Are you sure?"}),(0,a.jsxs)(eU,{children:["This will permanently delete the selected ",S.length," item(s). This action cannot be undone."]})]}),(0,a.jsxs)(eD,{children:[(0,a.jsx)(eO,{children:"Cancel"}),(0,a.jsx)(eA,{onClick:()=>{eW({type:"DELETE_SELECTED",payload:{tiles:S}}),k([]),T(!1)},children:"Delete"})]})]})})]})}},6763:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(1148);let n=0,r=new Map,l=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5390:function(e,t,s){"use strict";s.d(t,{PlayerStatsProvider:function(){return i},g:function(){return o}});var a=s(6920),n=s(1148);let r=(0,n.createContext)(void 0),l={worldName:"My World",avatarUrl:"/items/avatar_man.png",seeds:0,totalSeedsProduced:0,manualSeedsGenerated:0,upgradesPurchased:0,totalTimePlayed:0,level:1,xpForCurrentLevel:0,xpForNextLevel:100,unlockedAchievements:[],completedMissions:[],itemLevels:{},groupLevels:{},globalLevels:{},categoryMultipliers:{},homePosition:{x:0,y:0}},i=e=>{let{children:t}=e,[s,i]=(0,n.useState)(l),[o,d]=(0,n.useState)(0),[c,u]=(0,n.useState)({}),[m,x]=(0,n.useState)({}),h=(0,n.useMemo)(()=>({playerStats:s,setPlayerStats:i,totalSeedsPerSecond:o,setTotalSeedsPerSecond:d,nextCosts:c,setNextCosts:u,missionProgress:m,setMissionProgress:x}),[s,o,c,m]);return(0,a.jsx)(r.Provider,{value:h,children:t})},o=()=>{let e=(0,n.useContext)(r);if(void 0===e)throw Error("usePlayerStats must be used within a PlayerStatsProvider");return e}},9354:function(e,t,s){"use strict";s.d(t,{cn:function(){return r},l:function(){return i},u:function(){return l}});var a=s(4839),n=s(6164);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}function l(e){if("number"!=typeof e||isNaN(e))return"0";if(e<1e3)return e<10&&e%1!=0?e.toFixed(2):Math.floor(e).toString();let t=[{value:1e15,symbol:"Q"},{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}].find(t=>e>=t.value);return t?(e/t.value).toFixed(e>=1e9?3:2).replace(/\.0+$/,"")+t.symbol:Math.floor(e).toLocaleString()}function i(e){if("number"!=typeof e||isNaN(e))return"0";if(e<1e3)return e<10&&e%1!=0?e.toFixed(2):Math.floor(e).toString();let t=[{value:1e15,symbol:"Q"},{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"}].find(t=>e>=t.value);if(t){let s=3;return e<1e6&&(s=2),(e/t.value).toFixed(s)+t.symbol}return e<1e6?(e/1e3).toFixed(2)+"k":Math.floor(e).toLocaleString()}}},function(e){e.O(0,[954,763,971,519,744],function(){return e(e.s=8393)}),_N_E=e.O()}]);